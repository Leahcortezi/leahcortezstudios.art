<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Garden - Leah Cortez Studios</title>
    <link href="https://fonts.googleapis.com/css2?family=Pirata+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/community.css">
    <link rel="icon" type="image/x-icon" href="../icons/favicon.ico">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="../index.html" class="logo">
                <img src="../images/logo/logo2.png" alt="Leah Cortez Studio" class="logo-img">
            </a>
            <ul class="nav-menu nav-links">
                <li><a href="../index.html">Home</a></li>
                <li><a href="../bio/index.html">Bio</a></li>
                <li><a href="../collections/index.html">Portfolio</a></li>
                <li><a href="../cv/index.html">CV</a></li>
                <li><a href="index.html">Community</a></li>
                <li><a href="../contact/index.html">Contact</a></li>
            </ul>
            <div class="hamburger">
                <img src="../icons/flower.svg" alt="Menu" class="hamburger-icon">
            </div>
        </div>
    </nav>

    <main>
        <!-- Hero Section with Welcome -->
        <section class="community-hero">
            <div class="hero-content">
                <h1>Community Garden</h1>
                <div class="welcome-purpose">
                    <div class="main-welcome">
                        <h2>Where Art Meets Identity</h2>
                        <p>A creative space for artists exploring culture, identity, and self-expression. Share your work, get inspired by daily prompts, and connect with fellow creators who understand the journey.</p>
                        <div class="quick-stats">
                            <span class="stat"><strong>127</strong> Active Artists</span>
                            <span class="stat"><strong>892</strong> Artworks Shared</span>
                            <span class="stat"><strong>Daily</strong> New Prompts</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Navigation Tabs -->
        <section class="community-nav">
            <div class="tab-container">
                <button class="tab-btn active" data-tab="feed">Community Feed</button>
                <button class="tab-btn" data-tab="prompts">Daily Prompt</button>
                <button class="tab-btn" data-tab="challenges">Challenges</button>
                <button class="tab-btn" data-tab="resources">Free Stuff</button>
            </div>
        </section>

        <!-- Community Feed Tab (Main) -->
        <section class="tab-content active" id="feed">
            <div class="content-container">
                
                <!-- Submit Work Button -->
                <div class="submit-work-header">
                    <button class="submit-work-btn" onclick="openSubmissionModal()">
                        Submit Your Work
                    </button>
                    <p class="submit-work-subtitle">Share your artwork with our creative community</p>
                </div>

                <!-- Showcase Filters -->
                <div class="showcase-filters">
                    <button class="filter-toggle" onclick="toggleFilters()">Show Filters</button>
                    <div class="filters-content">
                        <div class="filter-section">
                            <label>Filter:</label>
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="newest">Newest</button>
                            <button class="filter-btn" data-filter="popular">Most Popular</button>
                            <button class="filter-btn" data-filter="prompt">Prompt Responses</button>
                        </div>
                        
                        <div class="medium-section">
                            <label>Medium:</label>
                            <select class="medium-filter" onchange="filterByMedium(this.value)">
                                <option value="all">All Mediums</option>
                                <option value="mixed-media">Mixed Media</option>
                                <option value="digital">Digital Art</option>
                                <option value="oil">Oil Painting</option>
                                <option value="watercolor">Watercolor</option>
                                <option value="acrylic">Acrylic</option>
                                <option value="charcoal">Charcoal</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Gallery Grid -->
                <div class="showcase-grid" id="showcaseGrid">
                    <!-- This will be populated with approved submissions -->
                    <div class="showcase-item placeholder-item" data-category="all recent" data-medium="mixed-media" data-likes="0" data-date="2025-08-07">
                        <div class="placeholder-image" style="background: linear-gradient(135deg, #7e1c2e, #f8c8d0);"></div>
                        <div class="showcase-overlay">
                            <h4>Your Art Here</h4>
                            <p>Submit your work to be featured!</p>
                            <span class="challenge-tag">Submit Now</span>
                            <div class="artwork-stats">
                                <button class="like-btn disabled">
                                    <span class="heart">‚ô°</span>
                                    <span class="like-count">0</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
        <!-- Daily Prompts Tab -->
        <section class="tab-content" id="prompts">
            <div class="content-container">
                
                <!-- Today's Prompt Card -->
                <div class="todays-prompt">
                    <div class="prompt-header">
                        <h2>Today's Creative Prompt</h2>
                        <div class="countdown-mini">
                            <span>Next prompt in: </span>
                            <span id="hours-mini">--</span>h 
                            <span id="minutes-mini">--</span>m 
                            <span id="seconds-mini">--</span>s
                        </div>
                    </div>
                    
                    <div class="prompt-main">
                        <div class="prompt-text-large" id="dailyPrompt">
                            Create an artwork inspired by nature's patterns and textures
                        </div>
                        
                        <div class="prompt-inspiration">
                            <h4>Need inspiration?</h4>
                            <div class="inspiration-tags">
                                <span class="inspo-tag">Tree bark textures</span>
                                <span class="inspo-tag">Leaf veins</span>
                                <span class="inspo-tag">Rock formations</span>
                                <span class="inspo-tag">Water ripples</span>
                            </div>
                        </div>
                        
                        <div class="prompt-actions-simple">
                            <button class="big-action-btn" onclick="createFromPrompt()">
                                Create & Share
                            </button>
                            <button class="secondary-btn" onclick="savePromptForLater()">
                                Save for Later
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </section>
        </section>

        <!-- Challenges Tab -->
        <section class="tab-content" id="challenges">
            <div class="content-container">
                
                <!-- Current Challenge -->
                <div class="current-challenge">
                    <div class="challenge-badge">ACTIVE CHALLENGE</div>
                    <h2>Sacred Chaos: Modern Loter√≠a Cards</h2>
                    <p>Create a Loter√≠a card that represents your cultural identity or personal story. Blend traditional iconography with your own contemporary symbols.</p>
                    
                    <div class="challenge-stats">
                        <div class="stat-item">
                            <strong>12</strong>
                            <span>Participants</span>
                        </div>
                        <div class="stat-item">
                            <strong>3</strong>
                            <span>Days Left</span>
                        </div>
                        <div class="stat-item">
                            <strong>$50</strong>
                            <span>Art Supply Prize</span>
                        </div>
                    </div>
                    
                    <div class="challenge-examples">
                        <h4>Example Ideas:</h4>
                        <div class="example-cards">
                            <span class="example-card">La M√∫sica</span>
                            <span class="example-card">La Tecnolog√≠a</span>
                            <span class="example-card">El Barrio</span>
                            <span class="example-card">La Resistencia</span>
                        </div>
                    </div>
                    
                    <button class="join-big-btn" onclick="joinMainChallenge()">
                        Join Challenge
                    </button>
                </div>

                <!-- Mini Challenges -->
                <div class="mini-challenges">
                    <h3>Quick Challenges (5-10 min)</h3>
                    <div class="mini-challenge-list">
                        <div class="mini-challenge">
                            <span class="mini-icon"></span>
                            <div class="mini-content">
                                <strong>Blind Contour Drawing</strong>
                                <p>Draw your hand without looking at the paper</p>
                            </div>
                            <button class="mini-btn" onclick="startMiniChallenge('blind-contour')">Try It</button>
                        </div>
                        
                        <div class="mini-challenge">
                            <span class="mini-icon"></span>
                            <div class="mini-content">
                                <strong>3-Color Limit</strong>
                                <p>Create something using only 3 colors</p>
                            </div>
                            <button class="mini-btn" onclick="startMiniChallenge('three-color')">Try It</button>
                        </div>
                        
                        <div class="mini-challenge">
                            <span class="mini-icon"></span>
                            <div class="mini-content">
                                <strong>Word to Image</strong>
                                <p>Turn today's word "Harmony" into art</p>
                            </div>
                            <button class="mini-btn" onclick="startMiniChallenge('word-art')">Try It</button>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- Exclusive Content Tab -->
        <section class="tab-content" id="exclusive">
            <div class="content-container">
                <h2>Exclusive Member Content</h2>
                
                <!-- Behind-the-Scenes -->
                <div class="exclusive-section">
                    <h3>Behind-the-Scenes</h3>
                    <div class="bts-grid">
                        <div class="bts-item">
                            <div class="bts-thumbnail">
                                <div class="placeholder-image" style="background: linear-gradient(135deg, #7e1c2e, #333);"></div>
                                <span class="content-type">Video</span>
                            </div>
                            <h4>Creating "Entre Mundos" - Process Shots</h4>
                            <p>Watch the transformation from sketch to final piece, including color mixing and layering techniques.</p>
                            <span class="exclusive-badge">New</span>
                        </div>
                        <div class="bts-item">
                            <div class="bts-thumbnail">
                                <div class="placeholder-image" style="background: linear-gradient(45deg, #f8c8d0, #7e1c2e);"></div>
                                <span class="content-type">Photo Series</span>
                            </div>
                            <h4>Studio Setup & Sacred Spaces</h4>
                            <p>A look into how I arrange my workspace for different creative energies and projects.</p>
                        </div>
                    </div>
                </div>

                <!-- Early Previews -->
                <div class="exclusive-section">
                    <h3>Early Previews</h3>
                    <div class="preview-gallery">
                        <div class="preview-item">
                            <div class="preview-image">
                                <div class="placeholder-image" style="background: linear-gradient(135deg, #333, #f8c8d0);"></div>
                                <span class="preview-badge">Coming Soon</span>
                            </div>
                            <h4>New Collection: "Digital Altars"</h4>
                            <p>Exploring sacred technology and digital worship spaces. Release: September 2025</p>
                        </div>
                    </div>
                </div>

                <!-- Downloadable Content -->
                <div class="exclusive-section">
                    <h3>Free Downloads</h3>
                    <div class="downloads-grid">
                        <div class="download-item">
                            <h4>Sacred Chaos Mobile Wallpapers</h4>
                            <p>High-resolution wallpapers featuring signature artwork details</p>
                            <button class="download-btn">Download Pack</button>
                        </div>
                        <div class="download-item">
                            <h4>Loter√≠a Coloring Pages</h4>
                            <p>Print-at-home coloring pages inspired by traditional Mexican imagery</p>
                            <button class="download-btn">Download PDF</button>
                        </div>
                        <div class="download-item">
                            <h4>Identity Journal Stickers</h4>
                            <p>Digital sticker pack for journaling and creative projects</p>
                            <button class="download-btn">Download Pack</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Discussion Tab -->
        <section class="tab-content" id="discussion">
            <div class="content-container">
                <h2>Community Discussion</h2>
                
                <!-- Prompt Responses -->
                <div class="discussion-section">
                    <h3>Today's Prompt Responses</h3>
                    <div class="responses-container">
                        <div class="response-item">
                            <div class="response-header">
                                <strong>@alexart92</strong>
                                <span class="response-time">2 hours ago</span>
                            </div>
                            <p>"I interpreted today's nature prompt by creating a piece about urban moss growing through concrete cracks. Sometimes the most beautiful patterns emerge from resistance."</p>
                            <div class="response-actions">
                                <button class="like-response">‚ô° 5</button>
                                <button class="reply-btn">Reply</button>
                            </div>
                        </div>
                        <div class="response-item">
                            <div class="response-header">
                                <strong>@creativemind</strong>
                                <span class="response-time">4 hours ago</span>
                            </div>
                            <p>"Working on a mixed media piece using dried flowers and metallic paint. The contrast between organic and industrial feels so right for this prompt."</p>
                            <div class="response-actions">
                                <button class="like-response">‚ô° 3</button>
                                <button class="reply-btn">Reply</button>
                            </div>
                        </div>
                    </div>
                    <div class="add-response">
                        <textarea placeholder="Share your interpretation of today's prompt..." class="response-input"></textarea>
                        <button class="submit-response-btn">Share Response</button>
                    </div>
                </div>

                <!-- Topic Boards -->
                <div class="discussion-section">
                    <h3>Discussion Boards</h3>
                    <div class="topic-boards">
                        <div class="board-item">
                            <h4>Art & Identity</h4>
                            <p>Exploring how personal and cultural identity shapes our creative expression</p>
                            <div class="board-stats">
                                <span>23 discussions</span>
                                <span>‚Ä¢</span>
                                <span>Last post 1 hour ago</span>
                            </div>
                        </div>
                        <div class="board-item">
                            <h4>Creative Struggles</h4>
                            <p>A supportive space to discuss artistic blocks, imposter syndrome, and growth challenges</p>
                            <div class="board-stats">
                                <span>18 discussions</span>
                                <span>‚Ä¢</span>
                                <span>Last post 3 hours ago</span>
                            </div>
                        </div>
                        <div class="board-item">
                            <h4>Symbol Spotting</h4>
                            <p>Share and discuss symbols, meanings, and cultural iconography in art</p>
                            <div class="board-stats">
                                <span>31 discussions</span>
                                <span>‚Ä¢</span>
                                <span>Last post 30 minutes ago</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Artwork Interpretations -->
                <div class="discussion-section">
                    <h3>Artwork Interpretations</h3>
                    <div class="interpretation-feature">
                        <div class="featured-artwork">
                            <div class="artwork-image">
                                <div class="placeholder-image" style="background: linear-gradient(135deg, #7e1c2e, #f8c8d0);"></div>
                            </div>
                            <div class="artwork-info">
                                <h4>"Abuela's Altar" - Leah Cortez</h4>
                                <p>Share your interpretation of this piece. What symbols speak to you? What memories does it evoke?</p>
                            </div>
                        </div>
                        <div class="interpretations">
                            <div class="interpretation-item">
                                <strong>@culturalroots:</strong> "The candles remind me of my grandmother's prayers every morning. There's something universal about these sacred domestic spaces."
                            </div>
                            <div class="interpretation-item">
                                <strong>@mixedmediamaker:</strong> "I love how the gold accents elevate everyday objects into something sacred. It's about finding the divine in the familiar."
                            </div>
                        </div>
                        <textarea placeholder="Share your interpretation..." class="interpretation-input"></textarea>
                        <button class="submit-interpretation-btn">Add Interpretation</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Events & Updates Tab -->
        <section class="tab-content" id="events">
            <div class="content-container">
                <h2>Events & Updates</h2>
                
                <!-- Upcoming Events -->
                <div class="events-section">
                    <h3>Upcoming Events</h3>
                    <div class="events-list">
                        <div class="event-item">
                            <div class="event-date">
                                <span class="month">Aug</span>
                                <span class="day">15</span>
                            </div>
                            <div class="event-details">
                                <h4>Live Q&A: Art & Cultural Identity</h4>
                                <p>Join me for a live discussion about navigating cultural identity through artistic expression. Bring your questions!</p>
                                <div class="event-meta">
                                    <span>7:00 PM PST</span>
                                    <span>‚Ä¢</span>
                                    <span>Instagram Live</span>
                                </div>
                                <button class="event-remind-btn">Set Reminder</button>
                            </div>
                        </div>
                        
                        <div class="event-item">
                            <div class="event-date">
                                <span class="month">Sep</span>
                                <span class="day">02</span>
                            </div>
                            <div class="event-details">
                                <h4>Local Exhibition: "Sacred Spaces"</h4>
                                <p>Come see new work in person at Gallery Moderna. Opening reception includes artist talk and community meet-up.</p>
                                <div class="event-meta">
                                    <span>6:00 PM - 9:00 PM</span>
                                    <span>‚Ä¢</span>
                                    <span>Los Angeles, CA</span>
                                </div>
                                <button class="event-rsvp-btn">RSVP</button>
                            </div>
                        </div>

                        <div class="event-item">
                            <div class="event-date">
                                <span class="month">Sep</span>
                                <span class="day">20</span>
                            </div>
                            <div class="event-details">
                                <h4>Virtual Community Meetup</h4>
                                <p>Monthly check-in with community members. Share works in progress, get feedback, and connect with fellow artists.</p>
                                <div class="event-meta">
                                    <span>5:00 PM PST</span>
                                    <span>‚Ä¢</span>
                                    <span>Zoom Link</span>
                                </div>
                                <button class="event-join-btn">Join Waitlist</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Updates -->
                <div class="updates-section">
                    <h3>Recent Updates</h3>
                    <div class="updates-list">
                        <div class="update-item">
                            <div class="update-date">Aug 7, 2025</div>
                            <h4>New Community Features Launched!</h4>
                            <p>Added member spotlight, monthly challenges, and interactive mood polls. Explore all the new ways to connect and create together.</p>
                        </div>
                        <div class="update-item">
                            <div class="update-date">Aug 1, 2025</div>
                            <h4>August Challenge Announced</h4>
                            <p>This month we're creating modern Loter√≠a cards! Check out the Interactive Hub for full details and inspiration.</p>
                        </div>
                        <div class="update-item">
                            <div class="update-date">Jul 28, 2025</div>
                            <h4>Community Showcase Improvements</h4>
                            <p>Enhanced filtering options and improved submission process. Submissions are now faster and easier than ever.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Free Stuff Tab -->
        <section class="tab-content" id="resources">
            <div class="content-container">
                
                <div class="free-stuff-header">
                    <h2>üéÅ Free Creative Resources</h2>
                    <p>Downloads, inspiration, and tools to fuel your artistic journey</p>
                </div>

                <!-- Available Downloads -->
                <div class="downloads-available">
                    <h3>üì• Available Now</h3>
                    <div class="download-grid">
                        <div class="download-card">
                            <div class="download-icon"></div>
                            <h4>Sacred Chaos Wallpapers</h4>
                            <p>Mobile & desktop wallpapers featuring artwork details</p>
                            <button class="download-now-btn" onclick="downloadPack('wallpapers')">
                                Download Pack
                            </button>
                        </div>
                        
                        <div class="download-card">
                            <div class="download-icon"></div>
                            <h4>Weekly Prompt Journal</h4>
                            <p>Printable weekly planner with creative prompts</p>
                            <button class="download-now-btn" onclick="downloadPack('journal')">
                                Download PDF
                            </button>
                        </div>
                        
                        <div class="download-card">
                            <div class="download-icon"></div>
                            <h4>Digital Sticker Pack</h4>
                            <p>Identity-themed stickers for journaling & creative projects</p>
                            <button class="download-now-btn" onclick="downloadPack('stickers')">
                                Download Pack
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Coming Soon -->
                <div class="coming-soon-simple">
                    <h3>üîÆ Coming This Month</h3>
                    <div class="coming-soon-list">
                        <div class="coming-item">
                            <span class="coming-icon"></span>
                            <div class="coming-info">
                                <strong>Loter√≠a Coloring Pages</strong>
                                <p>Modern takes on traditional cards</p>
                            </div>
                            <span class="eta">Aug 15</span>
                        </div>
                        
                        <div class="coming-item">
                            <span class="coming-icon">üìñ</span>
                            <div class="coming-info">
                                <strong>DIY Zine Kit</strong>
                                <p>Complete templates & assembly guide</p>
                            </div>
                            <span class="eta">Aug 22</span>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- Community Showcase Tab -->
        <section class="tab-content" id="showcase">
            <div class="content-container">
                <h2>Community Showcase</h2>
                
                <!-- Submit Work Button -->
                <div class="submit-work-header">
                    <button class="submit-work-btn" onclick="openSubmissionModal()">
                        Submit Your Work
                    </button>
                    <p class="submit-work-subtitle">Share your artwork with our creative community</p>
                </div>

                <!-- Showcase Filters -->
                <div class="showcase-filters">
                    <button class="filter-toggle" onclick="toggleFilters()">Show Filters</button>
                    <div class="filters-content">
                        <div class="filter-section">
                            <label>Filter:</label>
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="newest">Newest</button>
                            <button class="filter-btn" data-filter="popular">Most Popular</button>
                            <button class="filter-btn" data-filter="prompt">Prompt Responses</button>
                        </div>
                        
                        <div class="medium-section">
                            <label>Medium:</label>
                            <select class="medium-filter" onchange="filterByMedium(this.value)">
                                <option value="all">All Mediums</option>
                                <option value="mixed-media">Mixed Media</option>
                                <option value="digital">Digital Art</option>
                                <option value="oil">Oil Painting</option>
                                <option value="watercolor">Watercolor</option>
                                <option value="acrylic">Acrylic</option>
                                <option value="charcoal">Charcoal</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Gallery Grid -->
                <div class="showcase-grid">
                    <div class="showcase-item" data-category="all recent" data-medium="mixed-media" data-likes="0" data-date="2025-08-07">
                        <div class="placeholder-image" style="background: linear-gradient(135deg, #7e1c2e, #f8c8d0);"></div>
                        <div class="showcase-overlay">
                            <h4>Memory & Time</h4>
                            <p><a href="https://instagram.com/alexrivera.art" target="_blank" rel="noopener noreferrer" class="instagram-link">@alexrivera.art</a></p>
                            <span class="challenge-tag">Mixed Media</span>
                            <div class="artwork-stats">
                                <button class="like-btn" onclick="toggleLike(this)" data-artwork-id="1">
                                    <span class="heart">‚ô°</span>
                                    <span class="like-count" style="display: none;">0</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="showcase-item" data-category="all recent" data-medium="digital" data-likes="0" data-date="2025-08-06">
                        <div class="placeholder-image" style="background: linear-gradient(135deg, #f8c8d0, #7e1c2e);"></div>
                        <div class="showcase-overlay">
                            <h4>Digital Dreams</h4>
                            <p><a href="https://instagram.com/samchen_art" target="_blank" rel="noopener noreferrer" class="instagram-link">@samchen_art</a></p>
                            <span class="challenge-tag">Digital Art</span>
                            <div class="artwork-stats">
                                <button class="like-btn" onclick="toggleLike(this)" data-artwork-id="2">
                                    <span class="heart">‚ô°</span>
                                    <span class="like-count" style="display: none;">0</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="showcase-item" data-category="all prompt" data-medium="oil" data-likes="0" data-date="2025-08-05">
                        <div class="placeholder-image" style="background: linear-gradient(45deg, #7e1c2e, #333);"></div>
                        <div class="showcase-overlay">
                            <h4>Urban Solitude</h4>
                            <p><a href="https://instagram.com/jordanblake.creates" target="_blank" rel="noopener noreferrer" class="instagram-link">@jordanblake.creates</a></p>
                            <span class="challenge-tag">Oil Painting</span>
                            <div class="artwork-stats">
                                <button class="like-btn" onclick="toggleLike(this)" data-artwork-id="3">
                                    <span class="heart">‚ô°</span>
                                    <span class="like-count" style="display: none;">0</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Artwork Submission Modal -->
     <section class="community-submission" id="submission">
        <div class="content-container">

         <div id="submissionModal" class="modal" onclick="closeSubmissionModal(event)">
             <div class="modal-content" onclick="event.stopPropagation()">
                <div class="modal-header">
                <h3>Share Your Artwork</h3>
                <button class="modal-close" onclick="closeSubmissionModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <p class="modal-subtitle">Upload your artwork to be featured in our community showcase</p>
                
                <form method="POST" action="https://formsubmit.co/97d276af598369e77984bb3ce5ffbca3" enctype="multipart/form-data" class="artwork-submission-form" onsubmit="return handleFormSubmission(event)">
                    <input type="hidden" name="_subject" value="Community Artwork Submission for Review">
                    <input type="hidden" name="_next" value="file:///Users/billyjoel/Documents/leahcortezstudios.art/community/index.html">
                    <input type="hidden" name="_captcha" value="false">
                    
                    <!-- Detailed submission info for review -->
                    <input type="hidden" name="submission_type" value="Community Artwork Submission">
                    <input type="hidden" name="submission_date" id="submissionDate">
                    <input type="hidden" name="submission_time" id="submissionTime">
                    <input type="hidden" name="review_status" value="PENDING REVIEW">
                    <input type="hidden" name="instructions" value="Review this artwork submission and add to community showcase if approved.">
                    
                    <div class="form-group">
                        <label for="artistName">Your Name*</label>
                        <input type="text" id="artistName" name="artist_name" placeholder="Your full name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="artistInstagram">Instagram Handle*</label>
                        <input type="text" id="artistInstagram" name="artist_instagram" placeholder="@yourhandle" required pattern="^@?[A-Za-z0-9._]{1,30}$" title="Enter your Instagram handle (with or without @)">
                    </div>
                    
                    <div class="form-group">
                        <label for="artworkTitle">Artwork Title*</label>
                        <input type="text" id="artworkTitle" name="artwork_title" placeholder="Enter your artwork title" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="artworkFile">Upload Your Artwork*</label>
                        <input type="file" id="artworkFile" name="artwork" accept="image/*" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="artworkDescription">Description (Optional)</label>
                        <textarea id="artworkDescription" name="artwork_description" placeholder="Tell us about your artwork, inspiration, medium used..." rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="artworkMedium">Medium/Technique</label>
                        <select id="artworkMedium" name="artwork_medium">
                            <option value="">Select medium (optional)</option>
                            <option value="digital">Digital Art</option>
                            <option value="traditional">Traditional Art</option>
                            <option value="mixed-media">Mixed Media</option>
                            <option value="photography">Photography</option>
                            <option value="sculpture">Sculpture</option>
                            <option value="textile">Textile Art</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="artworkCategory">Category</label>
                        <select id="artworkCategory" name="artwork_category">
                            <option value="">Select category (optional)</option>
                            <option value="daily-prompt">Daily Prompt Response</option>
                            <option value="personal">Personal Work</option>
                            <option value="commission">Commission Work</option>
                            <option value="study">Study/Practice</option>
                            <option value="collaboration">Collaboration</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="cancel-btn" onclick="closeSubmissionModal()">Cancel</button>
                        <button type="submit" class="submit-btn">Submit Artwork</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Login/Registration Modal -->
    <div id="loginModal" class="modal" onclick="closeLoginModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3>Join Our Community</h3>
                <button class="modal-close" onclick="closeLoginModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <p class="modal-subtitle">Please sign in to participate in community activities</p>
                
                <!-- Login Form -->
                <div id="loginForm" class="auth-form active">
                    <form class="login-form" onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <label for="loginEmail">Email*</label>
                            <input type="email" id="loginEmail" name="email" placeholder="your@email.com" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="loginName">Display Name*</label>
                            <input type="text" id="loginName" name="name" placeholder="Your Name" required>
                        </div>
                        
                        <div class="form-group">
                            <div class="captcha-container">
                                <label class="captcha-label">
                                    <input type="checkbox" id="robotCheck" required>
                                    <span class="checkmark"></span>
                                    I'm not a robot
                                </label>
                                <div class="captcha-challenge" id="captchaChallenge" style="display: none;">
                                    <p>Please solve: <span id="captchaQuestion"></span></p>
                                    <input type="number" id="captchaAnswer" placeholder="Answer" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="communityRules" required>
                                <span class="checkmark"></span>
                                I agree to the <a href="#" onclick="showCommunityRules()">Community Guidelines</a>
                            </label>
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="cancel-btn" onclick="closeLoginModal()">Cancel</button>
                            <button type="submit" class="submit-btn">Join Community</button>
                        </div>
                    </form>
                </div>
                
                <!-- Community Rules -->
                <div id="communityRules" class="community-rules" style="display: none;">
                    <h4>Community Guidelines</h4>
                    <div class="rules-content">
                        <ul>
                            <li><strong>Be Respectful:</strong> Treat all community members with kindness and respect</li>
                            <li><strong>No Spam:</strong> Avoid repetitive posts or promotional content without value</li>
                            <li><strong>No Hate Speech:</strong> Discrimination, harassment, or hate speech is not tolerated</li>
                            <li><strong>Stay On Topic:</strong> Keep posts relevant to art, creativity, and community building</li>
                            <li><strong>Original Content:</strong> Share your own work or properly credit others</li>
                            <li><strong>Constructive Feedback:</strong> Offer helpful, specific feedback when requested</li>
                            <li><strong>Privacy:</strong> Respect others' privacy and don't share personal information</li>
                            <li><strong>Report Issues:</strong> Help keep the community safe by reporting inappropriate content</li>
                        </ul>
                        <p><em>Violations may result in content removal or account suspension.</em></p>
                    </div>
                    <button class="rules-close-btn" onclick="hideCommunityRules()">I Understand</button>
                </div>
            </div>
        </div>
    </div>

    <script>
    // Form submission handler
    function handleFormSubmission(event) {
        console.log('Form submission started');
        
        const form = event.target;
        const formData = new FormData(form);
        
        // Populate submission date and time
        const now = new Date();
        document.getElementById('submissionDate').value = now.toLocaleDateString();
        document.getElementById('submissionTime').value = now.toLocaleTimeString();
        
        const name = formData.get('artist_name');
        const instagram = formData.get('artist_instagram');
        const title = formData.get('artwork_title');
        const description = formData.get('artwork_description');
        const medium = formData.get('artwork_medium');
        const category = formData.get('artwork_category');
        const file = formData.get('artwork');
        
        console.log('Form data:', { name, instagram, title, medium, category, file: file ? file.name : 'No file' });
        
        // Validate required fields
        if (!name || !instagram || !title) {
            event.preventDefault();
            showNotification('Please fill out all required fields (Name, Instagram Handle, and Artwork Title).', 'error');
            return false;
        }
        
        // Validate Instagram handle format
        const instagramPattern = /^@?[A-Za-z0-9._]{1,30}$/;
        if (!instagramPattern.test(instagram)) {
            event.preventDefault();
            showNotification('Please enter a valid Instagram handle (e.g., @yourhandle or yourhandle).', 'error');
            return false;
        }
        
        if (!file || file.size === 0) {
            event.preventDefault();
            showNotification('Please select an artwork file to upload.', 'error');
            return false;
        }
        
        // Check file size (10MB limit)
        if (file.size > 10 * 1024 * 1024) {
            event.preventDefault();
            showNotification('File size must be less than 10MB. Please choose a smaller image.', 'error');
            return false;
        }
        
        // Normalize Instagram handle (ensure it starts with @)
        let normalizedInstagram = instagram.trim();
        if (!normalizedInstagram.startsWith('@')) {
            normalizedInstagram = '@' + normalizedInstagram;
        }
        document.getElementById('artistInstagram').value = normalizedInstagram;
        
        // Show loading state
        const submitBtn = form.querySelector('.submit-btn');
        if (submitBtn) {
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;
        }
        
        // Show immediate feedback - but don't close modal yet
        showNotification('Submitting your artwork...', 'info');
        
        // Allow normal form submission to FormSubmit
        console.log('Allowing form submission to FormSubmit');
        return true;
    }

    // Tab functionality
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Tab functionality loaded');
        
        // Initialize poll
        initializePoll();
        
        // Add poll form listener
        const pollForm = document.getElementById('printablePoll');
        if (pollForm) {
            pollForm.addEventListener('submit', submitPoll);
        }
        
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const tabName = btn.dataset.tab;
                console.log('Tab clicked:', tabName);
                
                // Remove active class from all tabs and content
                document.querySelectorAll('.tab-btn, .tab-content').forEach(el => {
                    el.classList.remove('active');
                });
                
                // Add active class to clicked tab and corresponding content
                btn.classList.add('active');
                const targetSection = document.getElementById(tabName);
                if (targetSection) {
                    targetSection.classList.add('active');
                    console.log('Activated section:', tabName);
                } else {
                    console.error('Section not found:', tabName);
                }
            });
        });
    });

    // Daily Prompt Generator with randomized adjectives and keywords  
    const promptTemplates = [
        "Create a {adjective} artwork that explores the concept of {concept} through {medium}",
        "Design a {style} piece that captures the feeling of {emotion} using {technique}",
        "Illustrate a {adjective} scene where {subject} meets {element} in a {setting}",
        "Express the relationship between {concept1} and {concept2} through {artistic_approach}",
        "Create a {adjective} composition that tells the story of {narrative_theme}",
        "Design a piece that transforms {everyday_object} into something {transformation}",
        "Explore the texture of {texture_inspiration} through {medium}",
        "Create a {color_mood} artwork inspired by the {time_period} of {time_of_day}",
        "Illustrate how {abstract_concept} would look if it were {physical_quality}",
        "Design a piece where {natural_element} becomes {metaphor}"
    ];

    const promptVariables = {
        adjective: ["monochromatic", "layered", "delicate", "textured", "geometric", "organic", "minimalist", "maximalist", "fragmented", "flowing", "angular", "soft-edged", "high-contrast", "muted", "luminous", "weathered", "pristine", "distressed", "ethereal", "grounded"],
        concept: ["memory", "identity", "transformation", "connection", "isolation", "growth", "decay", "hope", "fear", "love", "time", "dreams", "reality", "freedom", "belonging", "heritage", "legacy", "journey", "awakening", "reflection"],
        medium: ["watercolor and ink", "digital collage", "mixed media", "charcoal and pastels", "acrylic paint", "pen and ink", "photography manipulation", "textile art", "sculpture elements", "found objects", "gouache", "oil pastels", "printmaking", "fabric and thread", "clay and pigment"],
        style: ["expressionist", "surreal", "minimalist", "maximalist", "impressionist", "abstract", "photorealistic", "folk art inspired", "contemporary", "vintage", "brutalist", "art nouveau", "cubist", "pointillist", "graffiti-inspired"],
        emotion: ["nostalgia", "wonder", "longing", "joy", "contemplation", "excitement", "peacefulness", "intensity", "curiosity", "melancholy", "empowerment", "vulnerability", "serenity", "passion", "tranquility"],
        technique: ["layering techniques", "negative space", "bold color contrasts", "subtle gradients", "textural buildup", "geometric patterns", "organic forms", "light and shadow play", "cross-hatching", "stippling", "glazing", "scumbling", "impasto", "dry brush", "wet-on-wet"],
        subject: ["a forgotten object", "a cultural symbol", "a family memory", "a natural element", "an architectural detail", "a personal ritual", "a childhood story", "an ancestral tradition", "a seasonal change", "a quiet moment"],
        element: ["modern technology", "ancient wisdom", "natural forces", "urban landscapes", "mythical creatures", "everyday magic", "hidden stories", "silent voices", "cultural patterns", "temporal shifts"],
        setting: ["dreamlike landscape", "urban environment", "natural sanctuary", "liminal space", "familiar place made strange", "imaginary realm", "historical context", "futuristic world", "intimate interior", "vast expanse"],
        artistic_approach: ["symbolic representation", "abstract interpretation", "narrative storytelling", "color psychology", "textural exploration", "geometric abstraction", "organic flow", "cultural fusion", "emotional mapping", "visual metaphor"],
        concept1: ["tradition", "progress", "nature", "humanity", "past", "future", "individual", "community", "silence", "voice", "structure", "chaos", "permanence", "change", "visible"],
        concept2: ["innovation", "heritage", "technology", "spirituality", "present", "memory", "collective", "personal", "sound", "expression", "freedom", "order", "transience", "stability", "hidden"],
        narrative_theme: ["cultural heritage", "personal growth", "family legacy", "environmental change", "social connection", "inner journey", "creative awakening", "community bonds", "generational wisdom", "artistic evolution"],
        everyday_object: ["a kitchen utensil", "a piece of clothing", "a plant", "a book", "a window", "a chair", "a photograph", "a key", "a mirror", "a door", "a cup", "a letter", "a tool", "a toy", "a stone"],
        transformation: ["luminous", "transparent", "living", "crystalline", "fluid", "architectural", "musical", "temporal", "ethereal", "monumental", "delicate", "powerful", "sacred", "revolutionary", "elemental"],
        texture_inspiration: ["tree bark", "flowing water", "weathered stone", "fabric weave", "skin", "metal patina", "flower petals", "sand dunes", "rain patterns", "aged paper", "rust", "moss", "scales", "feathers", "crystal formations"],
        color_mood: ["monochromatic earth tones", "vibrant jewel palette", "muted pastels", "high contrast black and white", "warm sunset hues", "cool oceanic blues", "metallic accents", "desert sand palette", "forest greens", "urban grays"],
        time_period: ["golden hour", "blue hour", "midnight", "dawn", "stormy afternoon", "quiet morning", "busy evening", "peaceful night", "twilight", "midday sun"],
        time_of_day: ["spring awakening", "summer abundance", "autumn transition", "winter stillness", "rainy season", "dry season", "harvest time", "growing season"],
        abstract_concept: ["rhythm", "silence", "momentum", "gravity", "resonance", "emotion", "memory", "dreams", "thoughts", "energy", "balance", "tension", "harmony", "discord", "flow"],
        physical_quality: ["tangible", "translucent", "textured", "smooth", "rough", "layered", "solid", "flowing", "glowing", "growing", "fragmented", "unified", "dense", "airy", "structured"],
        natural_element: ["water", "fire", "earth", "air", "lightning", "mist", "sunlight", "shadows", "roots", "seeds", "wind", "rain", "snow", "stone", "wood"],
        metaphor: ["a bridge", "a voice", "a guardian", "a storyteller", "a teacher", "a healer", "a messenger", "a sanctuary", "a journey", "a celebration", "a mirror", "a vessel", "a pathway", "a threshold", "a tapestry"]
    };

    let currentDailyPrompt = null;
    let promptDate = null;

    function generateDailyPrompt() {
        console.log('Generating daily prompt...');
        const today = new Date().toDateString();
        
        // Check if we already have a prompt for today
        const storedPrompt = localStorage.getItem('dailyPrompt');
        const storedDate = localStorage.getItem('promptDate');
        
        console.log('Stored prompt:', storedPrompt, 'Stored date:', storedDate, 'Today:', today);
        
        if (storedPrompt && storedDate === today) {
            // Use existing prompt for today
            currentDailyPrompt = storedPrompt;
            const promptElement = document.getElementById('dailyPrompt');
            if (promptElement) {
                promptElement.textContent = currentDailyPrompt;
                console.log('Used stored prompt:', currentDailyPrompt);
            }
            updatePromptTags();
            return;
        }
        
        // Generate new prompt for today
        const template = promptTemplates[Math.floor(Math.random() * promptTemplates.length)];
        let prompt = template;
        
        console.log('Selected template:', template);
        
        // Replace placeholders with random words
        const placeholderRegex = /{(\w+)}/g;
        prompt = prompt.replace(placeholderRegex, (match, key) => {
            if (promptVariables[key]) {
                const options = promptVariables[key];
                const selected = options[Math.floor(Math.random() * options.length)];
                console.log('Replacing', match, 'with', selected);
                return selected;
            }
            return match;
        });
        
        currentDailyPrompt = prompt;
        console.log('Generated new prompt:', prompt);
        
        // Store in localStorage
        localStorage.setItem('dailyPrompt', prompt);
        localStorage.setItem('promptDate', today);
        
        // Update display immediately
        const promptElement = document.getElementById('dailyPrompt');
        if (promptElement) {
            promptElement.textContent = prompt;
            console.log('Updated prompt display with:', prompt);
        } else {
            console.error('Prompt element not found!');
        }
        updatePromptTags();
        
        // Add to history if it's a new day
        addPromptToHistory(prompt);
    }

    function updatePromptTags() {
        const tagContainer = document.querySelector('.prompt-tags');
        if (!tagContainer) return;
        
        // Define tag categories to prevent clashing
        const tagCategories = {
            style: ["expressive", "contemplative", "intuitive", "experimental", "atmospheric", "gestural", "spontaneous", "personal", "intimate", "dreamy", "playful", "nostalgic"],
            approach: ["structured", "fluid", "loose", "controlled", "focused", "grounded", "balanced", "rhythmic", "open", "unified"],
            quality: ["bold", "subtle", "raw", "refined", "precise", "dynamic", "layered", "simplified", "rich", "spare"],
            mood: ["warm", "ethereal", "earthy", "flowing", "weightless", "expansive", "traditional", "contemporary", "natural", "urban"],
            form: ["organic", "geometric", "smooth", "textured", "angular", "curved", "linear", "circular", "fragmented", "contained"]
        };
        
        const selectedTags = [];
        const usedCategories = [];
        
        // Select 3-4 tags from different categories to avoid clashing
        const tagCount = Math.floor(Math.random() * 2) + 3; // 3 or 4 tags
        const categoryKeys = Object.keys(tagCategories);
        
        while (selectedTags.length < tagCount && usedCategories.length < categoryKeys.length) {
            const randomCategoryIndex = Math.floor(Math.random() * categoryKeys.length);
            const categoryKey = categoryKeys[randomCategoryIndex];
            
            // Skip if we've already used this category
            if (usedCategories.includes(categoryKey)) continue;
            
            const categoryTags = tagCategories[categoryKey];
            const randomTag = categoryTags[Math.floor(Math.random() * categoryTags.length)];
            
            selectedTags.push(randomTag);
            usedCategories.push(categoryKey);
        }
        
        tagContainer.innerHTML = selectedTags.map(tag => `<span class="tag">${tag}</span>`).join('');
    }

    function generateNewPrompt() {
        // Only refresh the tags, keep the same prompt for the day
        updatePromptTags();
    }

    function addPromptToHistory(prompt) {
        const historyContainer = document.getElementById('promptHistory');
        if (!historyContainer) return;
        
        const promptElement = document.createElement('div');
        promptElement.className = 'prompt-history-item';
        promptElement.innerHTML = `
            <p>${prompt}</p>
            <small>${new Date().toLocaleDateString()}</small>
        `;
        historyContainer.insertBefore(promptElement, historyContainer.firstChild);
        
        // Keep only last 7 prompts
        while (historyContainer.children.length > 7) {
            historyContainer.removeChild(historyContainer.lastChild);
        }
        
        // Save history to localStorage
        const history = Array.from(historyContainer.children).map(item => ({
            prompt: item.querySelector('p').textContent,
            date: item.querySelector('small').textContent
        }));
        localStorage.setItem('promptHistory', JSON.stringify(history));
    }

    function loadPromptHistory() {
        const historyContainer = document.getElementById('promptHistory');
        if (!historyContainer) return;
        
        const savedHistory = localStorage.getItem('promptHistory');
        if (savedHistory) {
            const history = JSON.parse(savedHistory);
            history.forEach(item => {
                const promptElement = document.createElement('div');
                promptElement.className = 'prompt-history-item';
                promptElement.innerHTML = `
                    <p>${item.prompt}</p>
                    <small>${item.date}</small>
                `;
                historyContainer.appendChild(promptElement);
            });
        }
    }

    // Artwork submission image preview
    function previewSubmissionImage(input) {
        const preview = document.getElementById('submissionImagePreview');
        const uploadArea = document.querySelector('.file-upload-area');
        const file = input.files[0];
        
        if (file) {
            // Validate file size (10MB limit)
            if (file.size > 10 * 1024 * 1024) {
                alert('File size must be less than 10MB. Please choose a smaller image.');
                input.value = '';
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.innerHTML = `
                    <img src="${e.target.result}" alt="Artwork preview" style="max-width: 300px; max-height: 300px; border-radius: 12px; border: 2px solid rgba(248, 200, 208, 0.3); object-fit: cover;">
                    <p style="color: #f8c8d0; margin-top: 15px; font-size: 0.9rem;">‚úÖ Image selected: ${file.name}</p>
                    <button type="button" onclick="clearSubmissionImage()" style="background: rgba(126, 28, 46, 0.2); border: 1px solid #f8c8d0; color: #f8c8d0; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-top: 10px;">Remove Image</button>
                `;
            };
            reader.readAsDataURL(file);
            
            // Update upload area styling
            uploadArea.style.borderColor = '#f8c8d0';
            uploadArea.style.background = 'rgba(248, 200, 208, 0.1)';
            uploadArea.innerHTML = '<p style="color: #f8c8d0;">Image selected! Click to change</p>';
        }
    }

    function clearSubmissionImage() {
        const preview = document.getElementById('submissionImagePreview');
        const uploadArea = document.querySelector('.file-upload-area');
        const fileInput = document.getElementById('artworkFile');
        
        preview.innerHTML = '';
        uploadArea.style.borderColor = 'rgba(248, 200, 208, 0.4)';
        uploadArea.style.background = 'rgba(248, 200, 208, 0.02)';
        uploadArea.innerHTML = `
            <p>Click to upload your artwork</p>
            <p class="upload-note">Supported formats: PNG, JPEG, GIF, WebP (Max 10MB)</p>
        `;
        fileInput.value = '';
    }

    // Modal functionality
    function openSubmissionModal() {
        const modal = document.getElementById('submissionModal');
        modal.classList.add('show');
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
    }

    // Helper function to update countdown display
    function updateCountdownDisplay(timeRemaining) {
        const hours = Math.floor(timeRemaining / (1000 * 60 * 60));
        const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
        
        // Update individual time elements
        const hoursElement = document.getElementById('hours');
        const minutesElement = document.getElementById('minutes');
        const secondsElement = document.getElementById('seconds');
        
        if (hoursElement) hoursElement.textContent = hours.toString().padStart(2, '0');
        if (minutesElement) minutesElement.textContent = minutes.toString().padStart(2, '0');
        if (secondsElement) secondsElement.textContent = seconds.toString().padStart(2, '0');
        
        console.log(`Timer: ${hours}h ${minutes}m ${seconds}s`);
    }

    // Show notification messages
    function showNotification(message, type = 'info') {
        // Create notification element if it doesn't exist
        let notification = document.getElementById('notification');
        if (!notification) {
            notification = document.createElement('div');
            notification.id = 'notification';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: bold;
                z-index: 1000;
                max-width: 300px;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            document.body.appendChild(notification);
        }
        
        // Set styles based on type
        if (type === 'success') {
            notification.style.backgroundColor = '#4CAF50';
        } else if (type === 'error') {
            notification.style.backgroundColor = '#f44336';
        } else {
            notification.style.backgroundColor = '#2196F3';
        }
        
        notification.textContent = message;
        
        // Slide in
        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
        }, 100);
        
        // Hide after 5 seconds
        setTimeout(() => {
            notification.style.transform = 'translateX(100%)';
        }, 5000);
    }

    // Countdown timer for next prompt with automatic update
    function updateCountdown() {
        const now = new Date();
        const tomorrow = new Date(now);
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(0, 0, 0, 0); // Set to midnight
        
        const timeUntilTomorrow = tomorrow.getTime() - now.getTime();
        
        // If we've reached midnight (or past), generate a new prompt
        if (timeUntilTomorrow <= 1000) { // Within 1 second of midnight
            console.log('Midnight reached! Generating new prompt...');
            
            // Clear old prompt data to force new generation
            localStorage.removeItem('dailyPrompt');
            localStorage.removeItem('promptDate');
            
            // Generate new prompt
            generateDailyPrompt();
            
            // Show notification about new prompt
            showNotification('A new daily prompt has arrived! Start creating!', 'success');
            
            // Recalculate countdown for the new day
            const newTomorrow = new Date(now);
            newTomorrow.setDate(newTomorrow.getDate() + 1);
            newTomorrow.setHours(0, 0, 0, 0);
            const newTimeUntilTomorrow = newTomorrow.getTime() - now.getTime();
            updateCountdownDisplay(newTimeUntilTomorrow);
        } else {
            updateCountdownDisplay(timeUntilTomorrow);
        }
    }

    // Close modal with Escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            closeSubmissionModal();
            closeResourceModal();
        }
    });

    // Color palette generator
    function generatePalette() {
        const palette = document.getElementById('colorPalette');
        const swatches = palette.querySelectorAll('.color-swatch');
        
        swatches.forEach(swatch => {
            const hue = Math.floor(Math.random() * 360);
            const saturation = Math.floor(Math.random() * 50) + 30; // 30-80%
            const lightness = Math.floor(Math.random() * 40) + 30; // 30-70%
            swatch.style.background = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
        });
    }

    // Composition guide
    document.getElementById('compositionType').addEventListener('change', (e) => {
        const grid = document.getElementById('gridOverlay');
        const type = e.target.value;
        
        grid.className = `grid-overlay ${type}`;
    });

    // Initialize page
    document.addEventListener('DOMContentLoaded', () => {
        console.log('Community page loaded - initializing...');
        
        // Force clear old data for fresh start
        localStorage.removeItem('dailyPrompt');
        localStorage.removeItem('promptDate');
        
        // Generate fresh prompt
        try {
            console.log('Starting prompt generation...');
            generateDailyPrompt();
        } catch (error) {
            console.error('Error generating daily prompt:', error);
            // Fallback prompt
            const promptElement = document.getElementById('dailyPrompt');
            if (promptElement) {
                promptElement.textContent = "Create an artwork that explores the concept of transformation through mixed media";
            }
        }
        
        // Start countdown timer immediately
        console.log('Initializing timer...');
        
        // Test if DOM elements exist
        setTimeout(() => {
            const hoursEl = document.getElementById('hours');
            const minutesEl = document.getElementById('minutes');
            const secondsEl = document.getElementById('seconds');
            
            console.log('Timer elements check:', {
                hours: hoursEl ? 'found' : 'NOT FOUND',
                minutes: minutesEl ? 'found' : 'NOT FOUND', 
                seconds: secondsEl ? 'found' : 'NOT FOUND'
            });
            
            if (hoursEl && minutesEl && secondsEl) {
                // Elements found, start timer
                hoursEl.textContent = 'OK';
                minutesEl.textContent = 'OK';
                secondsEl.textContent = 'OK';
                
                console.log('Set test values, starting actual timer...');
                
                // Simple timer function
                function updateTimer() {
                    const now = new Date();
                    const midnight = new Date(now);
                    midnight.setDate(midnight.getDate() + 1);
                    midnight.setHours(0, 0, 0, 0);
                    
                    const timeLeft = midnight.getTime() - now.getTime();
                    const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                    
                    hoursEl.textContent = String(hours).padStart(2, '0');
                    minutesEl.textContent = String(minutes).padStart(2, '0');
                    secondsEl.textContent = String(seconds).padStart(2, '0');
                    
                    console.log(`Timer: ${hours}:${minutes}:${seconds}`);
                }
                
                // Start immediately and repeat
                updateTimer();
                setInterval(updateTimer, 1000);
            } else {
                console.error('Timer elements not found in DOM');
            }
        }, 500); // Wait 500ms for DOM to be ready
        
        // Initialize stats with animation
        try {
            animateNumbers();
        } catch (error) {
            console.error('Error animating numbers:', error);
        }
        
        // Initialize showcase filters
        try {
            initializeShowcaseFilters();
        } catch (error) {
            console.error('Error initializing showcase filters:', error);
        }
    });

    function animateNumbers() {
        const counters = document.querySelectorAll('.stat-number');
        counters.forEach(counter => {
            const target = parseInt(counter.textContent);
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                counter.textContent = Math.floor(current);
            }, 30);
        });
    }

    // Art Block Breaker Functions
    function openBlockBuster(type) {
        // Hide all generators first
        document.querySelectorAll('.interactive-generator').forEach(gen => {
            gen.style.display = 'none';
        });
        
        // Map the type to the correct ID
        const generatorMap = {
            'color': 'colorMoodGenerator',
            'style': 'styleFusionGenerator', 
            'subject': 'subjectTransformer',
            'technique': 'techniqueMixer'
        };
        
        // Show the selected generator
        const generatorId = generatorMap[type];
        const generator = document.getElementById(generatorId);
        if (generator) {
            generator.style.display = 'block';
            generator.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // Update active state
        document.querySelectorAll('.buster-card').forEach(card => {
            card.classList.remove('active');
        });
        event.target.closest('.buster-card').classList.add('active');
    }

    function generateMoodPalette() {
        const energy = document.getElementById('energySlider').value;
        const emotion = document.getElementById('emotionSlider').value;
        const complexity = document.getElementById('complexitySlider').value;
        const colorCount = document.getElementById('colorCount').value;
        
        // Color palettes based on mood
        const palettes = {
            energetic: ['#FF6B35', '#F7931E', '#FFD23F', '#06FFA5', '#118AB2'],
            calm: ['#264653', '#2A9D8F', '#E9C46A', '#F4A261', '#E76F51'],
            mysterious: ['#2D1B69', '#11213F', '#0F3460', '#16537E', '#533A7B'],
            vibrant: ['#E63946', '#F77F00', '#FCBF49', '#06FFA5', '#277DA1'],
            earthy: ['#8B4513', '#D2691E', '#CD853F', '#F4A460', '#DEB887'],
            monochrome: ['#000000', '#404040', '#808080', '#C0C0C0', '#FFFFFF']
        };
        
        // Select palette based on emotion value
        let selectedPalette;
        if (emotion < 20) selectedPalette = palettes.calm;
        else if (emotion < 40) selectedPalette = palettes.earthy;
        else if (emotion < 60) selectedPalette = palettes.mysterious;
        else if (emotion < 80) selectedPalette = palettes.vibrant;
        else selectedPalette = palettes.energetic;
        
        // Shuffle and select colors
        const shuffled = [...selectedPalette].sort(() => 0.5 - Math.random());
        const finalColors = shuffled.slice(0, colorCount);
        
        // Display the palette
        const paletteContainer = document.getElementById('moodPaletteResult');
        paletteContainer.innerHTML = finalColors.map(color => 
            '<div class="color-swatch" style="background-color: ' + color + ';" title="' + color + '"></div>'
        ).join('');
        
        // Show result
        document.getElementById('colorResult').style.display = 'block';
        
        // Generate mood description
        const moodDesc = document.getElementById('moodDescription');
        const energyDesc = energy < 30 ? 'low-energy' : energy < 70 ? 'balanced' : 'high-energy';
        const emotionDesc = emotion < 30 ? 'serene' : emotion < 70 ? 'warm' : 'intense';
        moodDesc.textContent = `This ${energyDesc}, ${emotionDesc} palette encourages ${getCreativePrompt(energy, emotion)}.`;
    }

    function getCreativePrompt(energy, emotion) {
        const prompts = {
            low_serene: 'contemplative mark-making and gentle textures',
            low_warm: 'soft blending and subtle color transitions',
            low_intense: 'dramatic contrasts with controlled application',
            balanced_serene: 'harmonious composition with mindful placement',
            balanced_warm: 'expressive brushwork and confident strokes',
            balanced_intense: 'bold statements with purposeful restraint',
            high_serene: 'dynamic movement within peaceful themes',
            high_warm: 'energetic expression with joyful abandon',
            high_intense: 'explosive creativity and fearless experimentation'
        };
        
        const energyKey = energy < 30 ? 'low' : energy < 70 ? 'balanced' : 'high';
        const emotionKey = emotion < 30 ? 'serene' : emotion < 70 ? 'warm' : 'intense';
        
        return prompts[`${energyKey}_${emotionKey}`] || 'creative exploration';
    }

    function generateStyleFusion() {
        const primary = document.getElementById('primaryMovement').value;
        const secondary = document.getElementById('secondaryInfluence').value;
        const technique = document.getElementById('techniqueFocus').value;
        
        const fusionResult = document.getElementById('fusionResult');
        const keyPoints = document.getElementById('styleKeyPoints');
        
        // Generate fusion description
        const descriptions = {
            impressionism: 'capturing light and movement with loose brushwork',
            expressionism: 'conveying emotion through bold color and distorted forms',
            abstract: 'exploring pure form, color, and composition',
            realism: 'precise observation and detailed representation',
            surrealism: 'blending dreams and reality in unexpected ways',
            minimalism: 'using essential elements for maximum impact'
        };
        
        const techniques = {
            color: 'Focus on color relationships, temperature, and harmony',
            texture: 'Explore surface quality, mark-making, and tactile elements',
            composition: 'Emphasize visual flow, balance, and spatial relationships',
            light: 'Study illumination, shadow, and atmospheric effects'
        };
        
        fusionResult.textContent = `${primary.charAt(0).toUpperCase() + primary.slice(1)} meets ${secondary} - ${descriptions[primary]} while ${descriptions[secondary]}.`;
        
        keyPoints.innerHTML = `
            <li><strong>Primary Approach:</strong> ${descriptions[primary]}</li>
            <li><strong>Secondary Influence:</strong> ${descriptions[secondary]}</li>
            <li><strong>Technical Focus:</strong> ${techniques[technique]}</li>
            <li><strong>Fusion Goal:</strong> Create a unique voice that bridges both styles</li>
        `;
        
        document.getElementById('styleResult').style.display = 'block';
    }

    function generateSubjectTransform() {
        // This function is called when user clicks the transform button
        // The subject should already be set by one of the input methods
        let subject = '';
        
        // Check which method is active
        const activeMethod = document.querySelector('.input-tab.active').dataset.method;
        
        if (activeMethod === 'random') {
            const randomSubjects = [
                'old bicycle', 'morning coffee', 'stormy sky', 'sleeping cat', 'city reflection',
                'garden gate', 'vintage chair', 'autumn leaf', 'flowing water', 'empty room',
                'bird in flight', 'weathered hands', 'distant mountains', 'urban alley', 'floating balloon'
            ];
            subject = randomSubjects[Math.floor(Math.random() * randomSubjects.length)];
        } else if (activeMethod === 'custom') {
            subject = document.getElementById('customSubject').value || 'your chosen subject';
        } else {
            subject = 'something from your immediate surroundings';
        }
        
        const transformations = [
            `Reimagine ${subject} as if viewed through water`,
            `Show ${subject} from an ant's perspective`,
            `Depict ${subject} in the style of a child's drawing`,
            `Transform ${subject} into pure geometric shapes`,
            `Render ${subject} as it might appear in a dream`,
            `Show only the shadows cast by ${subject}`,
            `Depict ${subject} as if it were made of light`,
            `Transform ${subject} into an abstract emotion`,
            `Show ${subject} through the eyes of someone who's never seen it before`,
            `Reimagine ${subject} as a landscape element`
        ];
        
        const randomTransform = transformations[Math.floor(Math.random() * transformations.length)];
        
        document.getElementById('transformResult').textContent = randomTransform;
        document.getElementById('subjectResult').style.display = 'block';
    }

    // Additional functions for Subject Transformer
    function switchInputMethod(method) {
        // Update tab states
        document.querySelectorAll('.input-tab').forEach(tab => {
            tab.classList.remove('active');
        });
        document.querySelector(`[data-method="${method}"]`).classList.add('active');
        
        // Show/hide method sections
        document.querySelectorAll('.input-method').forEach(section => {
            section.style.display = 'none';
        });
        document.getElementById(method + 'Method').style.display = 'block';
    }

    function getRandomSubject() {
        const subjects = [
            'old bicycle', 'morning coffee', 'stormy sky', 'sleeping cat', 'city reflection',
            'garden gate', 'vintage chair', 'autumn leaf', 'flowing water', 'empty room',
            'bird in flight', 'weathered hands', 'distant mountains', 'urban alley', 'floating balloon',
            'forgotten toy', 'crumpled paper', 'street lamp', 'puddle reflection', 'wind chime'
        ];
        const randomSubject = subjects[Math.floor(Math.random() * subjects.length)];
        
        document.getElementById('randomSubjectDisplay').textContent = randomSubject;
        document.getElementById('randomSubjectResult').style.display = 'block';
    }

    function previewCustomSubject() {
        const input = document.getElementById('customSubject').value;
        if (input.trim()) {
            document.getElementById('customSubjectDisplay').textContent = input;
            document.getElementById('customSubjectResult').style.display = 'block';
        } else {
            document.getElementById('customSubjectResult').style.display = 'none';
        }
    }

    function selectSurrounding(item) {
        document.getElementById('surroundingsDisplay').textContent = item;
        document.getElementById('surroundingsResult').style.display = 'block';
        
        // Update button states
        document.querySelectorAll('.surrounding-btn').forEach(btn => {
            btn.classList.remove('selected');
        });
        event.target.classList.add('selected');
    }

    function closeBlockBuster() {
        document.querySelectorAll('.interactive-generator').forEach(gen => {
            gen.style.display = 'none';
        });
        document.querySelectorAll('.buster-card').forEach(card => {
            card.classList.remove('active');
        });
    }

    function generateTechniqueMix() {
        const medium = document.getElementById('primaryMedium').value;
        const experimental = document.getElementById('experimentalFactor').value;
        
        const techniques = {
            watercolor: ['wet-on-wet bleeding', 'salt texture effects', 'masking fluid resist', 'layered glazing'],
            acrylic: ['impasto texture', 'color mixing on canvas', 'glazing techniques', 'palette knife work'],
            oil: ['alla prima painting', 'scumbling effects', 'glazing layers', 'broken color technique'],
            digital: ['custom brush creation', 'layer blending modes', 'digital collage', 'texture overlays'],
            mixed: ['collage integration', 'resist techniques', 'found object inclusion', 'multimedia layering']
        };
        
        const experimental_factors = {
            low: 'subtle variations on traditional methods',
            medium: 'combining two complementary techniques',
            high: 'bold experimentation with unconventional tools'
        };
        
        const selectedTechniques = techniques[medium] || techniques.mixed;
        const randomTechnique = selectedTechniques[Math.floor(Math.random() * selectedTechniques.length)];
        
        document.getElementById('techniqueResult').innerHTML = `
            <h4>Today's Technique Challenge:</h4>
            <p><strong>Primary Method:</strong> ${randomTechnique}</p>
            <p><strong>Experimental Approach:</strong> ${experimental_factors[experimental]}</p>
            <p><strong>Bonus Challenge:</strong> Try this technique with your non-dominant hand for the first 5 minutes</p>
        `;
        
        document.getElementById('mixResult').style.display = 'block';
    }

    // Community Hub Functions
    function openDiscussions() {
        alert('Artist Discussions feature coming soon! Join our community to participate in creative conversations.');
    }

    function openLearning() {
        alert('Learning Circle feature coming soon! Share and discover tutorials, tips, and techniques.');
    }

    function openChallenges() {
        alert('Weekly Challenges feature coming soon! Participate in themed art challenges with the community.');
    }

    function openBuddySystem() {
        alert('Art Buddy System feature coming soon! Find accountability partners and artistic mentors.');
    }

    function shareProgress() {
        alert('Share Progress feature coming soon! Show your artistic journey with the community.');
    }

    function askForFeedback() {
        alert('Ask for Feedback feature coming soon! Get constructive criticism from fellow artists.');
    }

    // Solo Artist Building Functions - Detailed Guidance
    function documentWork() {
        alert('Document Your Creative Process:\n\n‚Ä¢ Take photos at different stages (sketch, halfway, finished)\n‚Ä¢ Note what techniques and materials you used\n‚Ä¢ Record your thoughts, decisions, and happy accidents\n‚Ä¢ Save these for future social media posts\n‚Ä¢ Include your workspace and tools occasionally\n‚Ä¢ Capture details that show your unique approach\n\nTip: Good documentation is the foundation of building an authentic online presence. People love seeing the journey, not just the destination!');
    }

    function exploreHashtags() {
        alert('#Ô∏è‚É£ Research Art Hashtags Strategy:\n\n‚Ä¢ Look up #[yourmedia]art (e.g., #watercolorart, #oilpainting)\n‚Ä¢ Find hashtags with 10k-100k posts (sweet spot for visibility)\n‚Ä¢ Check what successful artists in your style use\n‚Ä¢ Mix popular and niche hashtags (70/30 split)\n‚Ä¢ Save 15-20 relevant hashtags for easy copying\n‚Ä¢ Avoid banned or overly generic hashtags\n\nTip: Good hashtags help the RIGHT people find your work. Quality engagement beats quantity!');
    }

    function studyArtists() {
        alert('üîç Study Artists in Your Medium:\n\n‚Ä¢ Find 5-10 artists whose style resonates with you\n‚Ä¢ Note what techniques and approaches they use\n‚Ä¢ Observe how they photograph and present their work\n‚Ä¢ See how they describe their process and inspiration\n‚Ä¢ Follow their artistic journey for ongoing inspiration\n‚Ä¢ Notice what makes their work distinctive\n\nTip: Study successful artists to learn professional practices, but never copy. Let them inspire your unique voice!');
    }

    function writeAboutArt() {
        alert('‚úçÔ∏è Practice Writing About Your Art:\n\n‚Ä¢ Describe your process in simple, relatable terms\n‚Ä¢ Share what inspired this particular piece\n‚Ä¢ Mention specific challenges you faced and overcame\n‚Ä¢ Explain techniques you used or experimented with\n‚Ä¢ Keep notes and drafts for future social media captions\n‚Ä¢ Practice storytelling, not just describing\n\nTip: People connect with stories and vulnerability. Share your genuine experience, and others will relate to your artistic journey!');
    }

    function addPersonalGoal() {
        const goal = prompt('What small creative goal would you like to set?\n\nExamples:\n‚Ä¢ Take progress photos of 3 finished pieces\n‚Ä¢ Write artist bio draft (2-3 paragraphs)\n‚Ä¢ Research 5 local art groups or online communities\n‚Ä¢ Complete one small painting this week\n‚Ä¢ Practice describing my work in 2-3 sentences\n‚Ä¢ Set up better lighting for photo documentation\n\nYour goal:');
        if (goal && goal.trim()) {
            alert('Goal Added Successfully!\n\n"' + goal + '"\n\nRemember: Small, consistent steps lead to significant progress. You\'ve got this! Breaking big dreams into small, actionable goals is how every successful artist builds their practice.');
        }
    }

    // Community Showcase Functions
    function submitArtwork() {
        alert('Submit Your Artwork:\n\nWe\'re building a supportive community showcase for emerging artists!\n\nTo be featured:\n‚Ä¢ Share your artistic journey and growth\n‚Ä¢ Include 2-3 of your best pieces\n‚Ä¢ Tell us about your creative process\n‚Ä¢ Describe challenges you\'ve overcome\n\nFeatures will highlight authentic stories of artistic development. Stay tuned for submission guidelines!');
    }

    // Gallery Filter Functionality
    function initializeShowcaseFilters() {
        // Prevent double initialization
        if (window.filtersInitialized) {
            console.log('Filters already initialized, skipping...');
            return;
        }
        
        console.log('Initializing showcase filters...');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const showcaseItems = document.querySelectorAll('.showcase-item');
        
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                const filter = this.getAttribute('data-filter');
                
                // Update active button
                filterButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                // Apply combined filters
                applyShowcaseFilters();
            });
        });
        
        // Initialize filters on load
        applyShowcaseFilters();
        window.filtersInitialized = true;
        console.log('Filters initialized successfully');
    }
    
    function applyShowcaseFilters() {
        const showcaseItems = document.querySelectorAll('.showcase-item');
        const activeFilterBtn = document.querySelector('.filter-btn.active');
        const mediumFilter = document.querySelector('.medium-filter');
        
        const categoryFilter = activeFilterBtn ? activeFilterBtn.getAttribute('data-filter') : 'all';
        const mediumValue = mediumFilter ? mediumFilter.value : 'all';
        
        let visibleCount = 0;
        
        showcaseItems.forEach(item => {
            const itemCategories = item.getAttribute('data-category') || '';
            const itemMedium = item.getAttribute('data-medium') || '';
            
            // Check category filter
            const matchesCategory = categoryFilter === 'all' || itemCategories.includes(categoryFilter);
            
            // Check medium filter
            const matchesMedium = mediumValue === 'all' || itemMedium === mediumValue;
            
            // Show/hide item
            if (matchesCategory && matchesMedium) {
                item.style.display = 'block';
                item.style.animation = 'fadeIn 0.3s ease-in';
                visibleCount++;
            } else {
                item.style.display = 'none';
            }
        });
        
        // Show no results message if needed
        updateNoResultsMessage(visibleCount);
    }
    
    function filterByMedium(medium) {
        applyShowcaseFilters();
    }
    
    function updateNoResultsMessage(visibleCount) {
        const showcaseGrid = document.getElementById('showcaseGrid');
        let noResultsMessage = showcaseGrid.querySelector('.no-results-message');
        
        if (visibleCount === 0) {
            if (!noResultsMessage) {
                noResultsMessage = document.createElement('div');
                noResultsMessage.className = 'no-results-message';
                noResultsMessage.style.cssText = 'grid-column: 1 / -1; text-align: center; padding: 2rem; color: #7e1c2e;';
                noResultsMessage.innerHTML = `
                    <h3>No artwork matches your filters</h3>
                    <p>Try selecting different filter options or submit your own work!</p>
                    <button class="submit-btn" onclick="openSubmissionModal()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #7e1c2e; color: white; border: none; border-radius: 5px; cursor: pointer;">Submit Your Art</button>
                `;
                showcaseGrid.appendChild(noResultsMessage);
            }
        } else {
            if (noResultsMessage) {
                noResultsMessage.remove();
            }
        }
    }
    
    function toggleFilters() {
        const filtersContent = document.querySelector('.filters-content');
        const filterToggle = document.querySelector('.filter-toggle');
        
        if (filtersContent.style.display === 'none' || !filtersContent.style.display) {
            filtersContent.style.display = 'flex';
            filterToggle.textContent = 'Hide Filters';
        } else {
            filtersContent.style.display = 'none';
            filterToggle.textContent = 'Show Filters';
        }
    }
    
    // Load approved submissions from your backend/approval system
    function loadApprovedSubmissions() {
        // For now, this is a placeholder
        // In the future, you can connect this to your backend API
        // that stores approved submissions from FormSubmit
        
        // Example of how you might load submissions:
        /*
        fetch('/api/approved-submissions')
            .then(response => response.json())
            .then(submissions => {
                submissions.forEach(submission => {
                    addApprovedSubmission(submission);
                });
            })
            .catch(error => {
                console.log('No additional submissions yet');
            });
        */
    }
    
    // Function to add an approved submission to the gallery
    function addApprovedSubmission(submission) {
        const showcaseGrid = document.getElementById('showcaseGrid');
        
        const submissionElement = document.createElement('div');
        submissionElement.className = 'showcase-item';
        submissionElement.dataset.category = submission.category || 'all recent';
        submissionElement.dataset.medium = submission.medium || 'mixed-media';
        submissionElement.dataset.likes = submission.likes || '0';
        submissionElement.dataset.date = submission.date || new Date().toISOString().split('T')[0];
        
        submissionElement.innerHTML = `
            <img src="${submission.image_url}" alt="${submission.title}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
            <div class="showcase-overlay">
                <h4>${submission.title}</h4>
                <p><a href="https://instagram.com/${submission.instagram_handle}" target="_blank" rel="noopener noreferrer" class="instagram-link">@${submission.instagram_handle}</a></p>
                <span class="challenge-tag">${submission.medium_display || submission.medium}</span>
                <div class="artwork-stats">
                    <button class="like-btn" onclick="toggleLike(this)" data-artwork-id="${submission.id}">
                        <span class="heart">‚ô°</span>
                        <span class="like-count" style="display: none;">${submission.likes || 0}</span>
                    </button>
                </div>
            </div>
        `;
        
        showcaseGrid.appendChild(submissionElement);
        
        // Reapply filters to include new submission
        applyShowcaseFilters();
    }

    // Submission Modal Functions
    function openSubmissionModal() {
        const modal = document.getElementById('submissionModal');
        if (modal) {
            modal.classList.add('show');
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
    }

    function closeSubmissionModal(event) {
        const modal = document.getElementById('submissionModal');
        if (modal && (!event || event.target === modal || event.target.classList.contains('modal-close') || event.target.classList.contains('cancel-btn'))) {
            modal.classList.remove('show');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            // Reset form
            const form = document.querySelector('.artwork-submission-form');
            if (form) {
                form.reset();
                if (preview) preview.innerHTML = '';
            }
        }
    }

    function previewSubmissionImage(input) {
        const preview = document.getElementById('submissionImagePreview');
        if (input.files && input.files[0] && preview) {
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.innerHTML = `
                    <div class="preview-container">
                        <img src="${e.target.result}" alt="Artwork preview" style="max-width: 200px; max-height: 200px; border-radius: 8px;">
                        <p class="preview-filename">${input.files[0].name}</p>
                    </div>
                `;
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function shareProgress() {
        alert('Share Your Progress:\n\nDocument and share your artistic journey:\n\n‚Ä¢ Take photos of works in progress\n‚Ä¢ Share technique discoveries\n‚Ä¢ Post about creative challenges\n‚Ä¢ Show your workspace evolution\n‚Ä¢ Celebrate small wins\n\nYour progress inspires other emerging artists. Every step forward matters!');
    }

    function connectArtists() {
        alert('ü§ù Connect with Fellow Artists:\n\nBuild meaningful artistic relationships:\n\n‚Ä¢ Follow artists in your medium\n‚Ä¢ Engage genuinely with their work\n‚Ä¢ Share encouraging comments\n‚Ä¢ Ask thoughtful questions\n‚Ä¢ Offer constructive support\n\nAuthentic connections lead to lasting friendships and mutual growth!');
    }

    function shareResources() {
        alert('üìö Share Learning Resources:\n\nHelp the community grow together:\n\n‚Ä¢ Recommend helpful tutorials\n‚Ä¢ Share technique discoveries\n‚Ä¢ Suggest useful art supplies\n‚Ä¢ Post about inspiring books/videos\n‚Ä¢ Offer tips you\'ve learned\n\nKnowledge shared multiplies. Your insights could be exactly what another artist needs!');
    }

    // Feature Guide Functions - Enhanced for Emerging Artists
    function openStarterGuide() {
        alert('üå± Getting Started Guide:\n\n1. Set up a simple, well-lit workspace\n2. Choose your preferred medium and stick with it initially\n3. Take high-quality photos of your current work\n4. Write a brief artist statement (1-2 paragraphs)\n5. Research where artists in your style gather online\n6. Start documenting your process\n\nRemember: Start small, stay consistent, and be authentic to your voice!');
    }

    function openGrowthTips() {
        alert('üìà Growth Strategies for Small Accounts:\n\n‚Ä¢ Post consistently (even works in progress count!)\n‚Ä¢ Use 10-15 relevant hashtags per post\n‚Ä¢ Engage genuinely with other artists before self-promoting\n‚Ä¢ Share your process, not just final pieces\n‚Ä¢ Tell stories about your inspiration and challenges\n‚Ä¢ Be patient - authentic growth takes time\n‚Ä¢ Focus on quality connections over quantity\n\nAuthenticity beats perfection every time!');
    }

    function openStoryGuide() {
        alert('üìñ Craft Your Artist Story:\n\n‚Ä¢ What first drew you to art?\n‚Ä¢ What themes or subjects fascinate you?\n‚Ä¢ What techniques are you currently exploring?\n‚Ä¢ What challenges inspire your creative growth?\n‚Ä¢ What do you hope viewers feel from your work?\n‚Ä¢ What\'s your artistic background or journey?\n\nYour unique perspective and journey are your greatest strengths. Share them openly!');
    }

    function openCommunityList() {
        alert('ü§ù Find Your Artistic Tribe:\n\n‚Ä¢ Instagram: Search #[yourmedium]artist hashtags\n‚Ä¢ Reddit: r/ArtCrit, r/learnart, r/[yourmedium]\n‚Ä¢ Discord: Join art servers in your specific style\n‚Ä¢ Local: Check libraries, coffee shops, art centers\n‚Ä¢ Facebook: Search for local artist groups\n‚Ä¢ Online forums: DeviantArt, ArtStation communities\n\nTip: Start engaging and supporting others before promoting your own work!');
    }

    function shareInspiration() {
        alert('Share Inspiration feature coming soon! Post references, ideas, and creative sparks.');
    }

    // Showcase Filtering and Liking System
    let userId = localStorage.getItem('userId') || generateUserId();
    let likedArtwork = JSON.parse(localStorage.getItem(`likedArtwork_${userId}`) || '[]');
    let artworkLikeCounts = JSON.parse(localStorage.getItem('artworkLikeCounts') || '{}');
    let userLikeTimestamps = JSON.parse(localStorage.getItem(`userLikeTimestamps_${userId}`) || '{}');
    let artworkLikers = JSON.parse(localStorage.getItem('artworkLikers') || '{}'); // Track who liked what
    let currentFilter = 'all';
    let currentMediumFilter = 'all';

    // Initialize like counts for placeholders (but don't allow new likes)
    const PLACEHOLDER_IDS = ['1', '2', '3', '4', '5', '6'];
    const SPAM_PREVENTION_DELAY = 2000; // 2 seconds between likes

    function generateUserId() {
        const id = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        localStorage.setItem('userId', id);
        return id;
    }

    function hasUserLikedArtwork(artworkId) {
        // Check if this specific user has already liked this artwork
        return likedArtwork.includes(artworkId) || 
               (artworkLikers[artworkId] && artworkLikers[artworkId].includes(userId));
    }

    function initializeLikeCounts() {
        // Set initial like counts for placeholders if not already set
        if (!artworkLikeCounts['1']) artworkLikeCounts['1'] = 12;
        if (!artworkLikeCounts['2']) artworkLikeCounts['2'] = 8;
        if (!artworkLikeCounts['3']) artworkLikeCounts['3'] = 15;
        if (!artworkLikeCounts['4']) artworkLikeCounts['4'] = 6;
        if (!artworkLikeCounts['5']) artworkLikeCounts['5'] = 20;
        if (!artworkLikeCounts['6']) artworkLikeCounts['6'] = 11;
        
        localStorage.setItem('artworkLikeCounts', JSON.stringify(artworkLikeCounts));
    }

    function canUserLike(artworkId) {
        const now = Date.now();
        const lastLikeTime = userLikeTimestamps[artworkId] || 0;
        
        // Check if enough time has passed since last like action
        if (now - lastLikeTime < SPAM_PREVENTION_DELAY) {
            return false;
        }
        
        return true;
    }

    function isPlaceholder(artworkId) {
        return PLACEHOLDER_IDS.includes(artworkId);
    }

    function toggleLike(button) {
        const artworkId = button.getAttribute('data-artwork-id');
        
        // Prevent liking placeholders
        if (isPlaceholder(artworkId)) {
            showLikeMessage('Placeholder artworks cannot be liked. Submit your own work to receive likes!');
            return;
        }
        
        // Prevent spam clicking
        if (!canUserLike(artworkId)) {
            showLikeMessage('Please wait before liking again.');
            return;
        }
        
        const likeCountSpan = button.querySelector('.like-count');
        const heartSpan = button.querySelector('.heart');
        
        // Initialize like count if it doesn't exist
        if (!artworkLikeCounts[artworkId]) {
            artworkLikeCounts[artworkId] = 0;
        }
        
        // Initialize likers array if it doesn't exist
        if (!artworkLikers[artworkId]) {
            artworkLikers[artworkId] = [];
        }
        
        let currentLikes = artworkLikeCounts[artworkId];
        const hasLiked = hasUserLikedArtwork(artworkId);
        
        if (hasLiked) {
            // Unlike - remove like
            likedArtwork = likedArtwork.filter(id => id !== artworkId);
            artworkLikers[artworkId] = artworkLikers[artworkId].filter(id => id !== userId);
            button.classList.remove('liked');
            heartSpan.textContent = '‚ô°';
            artworkLikeCounts[artworkId] = Math.max(0, currentLikes - 1);
            showLikeMessage('Like removed');
        } else {
            // Like - add like (only if not already liked by this user)
            if (!hasUserLikedArtwork(artworkId)) {
                likedArtwork.push(artworkId);
                artworkLikers[artworkId].push(userId);
                button.classList.add('liked');
                heartSpan.textContent = '‚ô•';
                artworkLikeCounts[artworkId] = currentLikes + 1;
                showLikeMessage('Artwork liked!');
            } else {
                // User has already liked this artwork
                showLikeMessage('You have already liked this artwork!');
                return;
            }
        }
        
        // Update display
        likeCountSpan.textContent = artworkLikeCounts[artworkId];
        
        // Update the data attribute for sorting
        button.closest('.showcase-item').setAttribute('data-likes', artworkLikeCounts[artworkId]);
        
        // Record timestamp for spam prevention
        userLikeTimestamps[artworkId] = Date.now();
        
        // Save to localStorage with user-specific keys
        localStorage.setItem(`likedArtwork_${userId}`, JSON.stringify(likedArtwork));
        localStorage.setItem('artworkLikeCounts', JSON.stringify(artworkLikeCounts));
        localStorage.setItem('artworkLikers', JSON.stringify(artworkLikers));
        localStorage.setItem(`userLikeTimestamps_${userId}`, JSON.stringify(userLikeTimestamps));
        
        // Add visual feedback
        button.style.transform = 'scale(1.1)';
        setTimeout(() => {
            button.style.transform = 'scale(1)';
        }, 150);
        
        // Prevent double clicking by temporarily disabling
        button.disabled = true;
        setTimeout(() => {
            button.disabled = false;
        }, 500);
    }

    function showLikeMessage(message) {
        // Create or update like message
        let messageEl = document.getElementById('like-message');
        if (!messageEl) {
            messageEl = document.createElement('div');
            messageEl.id = 'like-message';
            messageEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--color-primary-accent);
                color: var(--color-background);
                padding: 1rem 1.5rem;
                border-radius: 8px;
                z-index: 1000;
                font-size: 0.9rem;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                transition: all 0.3s ease;
                transform: translateX(100%);
            `;
            document.body.appendChild(messageEl);
        }
        
        messageEl.textContent = message;
        messageEl.style.transform = 'translateX(0)';
        
        setTimeout(() => {
            messageEl.style.transform = 'translateX(100%)';
        }, 2000);
    }

    function filterShowcase(filterType) {
        currentFilter = filterType;
        
        // Update active button
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.getAttribute('data-filter') === filterType) {
                btn.classList.add('active');
            }
        });
        
        applyFilters();
    }

    function toggleFilters() {
        const filtersContent = document.querySelector('.filters-content');
        const toggleBtn = document.querySelector('.filter-toggle');
        
        filtersContent.classList.toggle('active');
        toggleBtn.classList.toggle('active');
        
        if (filtersContent.classList.contains('active')) {
            toggleBtn.textContent = 'Hide Filters';
        } else {
            toggleBtn.textContent = 'Show Filters';
        }
    }

    function filterByMedium(medium) {
        currentMediumFilter = medium;
        applyFilters();
    }

    function applyFilters() {
        const items = document.querySelectorAll('.showcase-item');
        
        // Add filtering class for smooth transition
        items.forEach(item => {
            item.classList.add('filtering');
        });
        
        setTimeout(() => {
            items.forEach(item => {
                const categories = item.getAttribute('data-category').split(' ');
                const medium = item.getAttribute('data-medium');
                
                let showItem = true;
                
                // Apply category filter
                if (currentFilter !== 'all' && !categories.includes(currentFilter)) {
                    showItem = false;
                }
                
                // Apply medium filter
                if (currentMediumFilter !== 'all' && medium !== currentMediumFilter) {
                    showItem = false;
                }
                
                if (showItem) {
                    item.style.display = 'block';
                    item.classList.remove('hidden');
                } else {
                    item.style.display = 'none';
                    item.classList.add('hidden');
                }
                
                // Remove filtering class
                item.classList.remove('filtering');
            });
            
            // Apply sorting after filtering
            sortShowcase();
        }, 150);
    }

    function sortShowcase() {
        const grid = document.querySelector('.showcase-grid');
        const items = Array.from(grid.querySelectorAll('.showcase-item:not(.hidden)'));
        
        if (currentFilter === 'newest') {
            items.sort((a, b) => new Date(b.getAttribute('data-date')) - new Date(a.getAttribute('data-date')));
        } else if (currentFilter === 'popular') {
            items.sort((a, b) => parseInt(b.getAttribute('data-likes')) - parseInt(a.getAttribute('data-likes')));
        }
        
        // Re-append sorted items
        items.forEach(item => grid.appendChild(item));
    }

    // Initialize liked artwork on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize like counts
        initializeLikeCounts();
        
        // Set up filter buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                filterShowcase(this.getAttribute('data-filter'));
            });
        });
        
        // Initialize liked states and update like counts from storage
        document.querySelectorAll('.showcase-item').forEach(item => {
            const artworkId = item.querySelector('[data-artwork-id]')?.getAttribute('data-artwork-id');
            if (artworkId && artworkLikeCounts[artworkId] !== undefined) {
                const likeCountSpan = item.querySelector('.like-count');
                const button = item.querySelector('.like-btn');
                
                // Update like count display from stored data
                likeCountSpan.textContent = artworkLikeCounts[artworkId];
                item.setAttribute('data-likes', artworkLikeCounts[artworkId]);
                
                // Set liked state if this specific user has liked this artwork
                if (hasUserLikedArtwork(artworkId)) {
                    button.classList.add('liked');
                    button.querySelector('.heart').textContent = '‚ô•';
                }
                
                // Add visual indicator for placeholders
                if (isPlaceholder(artworkId)) {
                    button.style.opacity = '0.6';
                    button.title = 'Placeholder artworks cannot be liked';
                    button.style.cursor = 'not-allowed';
                }
            }
        });
        
        // Initialize with 'all' filter
        filterShowcase('all');
    });
    </script>
    
    <!-- Community JavaScript -->
    <script src="../scripts/community.js"></script>
    
    <!-- Main Navigation Script -->
    <script>
        // Mobile Navigation Toggle
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-links');
            
            if (hamburger && navMenu) {
                hamburger.addEventListener('click', function() {
                    navMenu.classList.toggle('active');
                    hamburger.classList.toggle('active');
                });
                
                // Close menu when clicking on nav links
                document.querySelectorAll('.nav-links li a').forEach(link => {
                    link.addEventListener('click', () => {
                        navMenu.classList.remove('active');
                        hamburger.classList.remove('active');
                    });
                });
                
                // Close menu when clicking outside
                document.addEventListener('click', function(e) {
                    if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
                        navMenu.classList.remove('active');
                        hamburger.classList.remove('active');
                    }
                });
            }
        });
    </script>

    <!-- Proper Tab Initialization -->
    <script>
    window.addEventListener('load', function() {
        console.log('Tab initialization script loaded');
        
        // Ensure community feed is the default active tab
        document.querySelectorAll('.tab-content').forEach(section => {
            section.classList.remove('active');
        });
        
        document.querySelectorAll('.tab-btn').forEach(button => {
            button.classList.remove('active');
        });
        
        // Set community feed as default
        const feedTab = document.getElementById('feed');
        const feedBtn = document.querySelector('[data-tab="feed"]');
        
        if (feedTab && feedBtn) {
            feedTab.classList.add('active');
            feedBtn.classList.add('active');
        }
        
        // Initialize filters after a delay to avoid conflicts
        setTimeout(() => {
            if (typeof initializeShowcaseFilters === 'function' && !window.filtersInitialized) {
                initializeShowcaseFilters();
                window.filtersInitialized = true;
            }
        }, 1000);
    });

    // Authentication System
    let pendingAction = null;
    let pendingActionData = null;

    // Check if user is logged in
    function isLoggedIn() {
        return localStorage.getItem('communityUser') !== null;
    }

    // Get current user data
    function getCurrentUser() {
        const userData = localStorage.getItem('communityUser');
        return userData ? JSON.parse(userData) : null;
    }

    // Require login before performing action
    function requireLogin(action, data = null) {
        if (isLoggedIn()) {
            executeAction(action, data);
        } else {
            pendingAction = action;
            pendingActionData = data;
            openLoginModal();
        }
    }

    // Execute the pending action after login
    function executeAction(action, data) {
        const user = getCurrentUser();
        if (!user) return;

        switch(action) {
            case 'applyCollaboration':
                applyToCollaboration(data);
                break;
            case 'joinArtTrade':
                joinArtTrade();
                break;
            case 'submitToZine':
                submitToZine();
                break;
            case 'postCollaboration':
                postCollaboration();
                break;
            case 'rsvpEvent':
                rsvpToEvent(data);
                break;
            case 'postEvent':
                postEvent();
                break;
            case 'submitResource':
                submitResource();
                break;
            case 'findCollaborator':
                findCollaborator();
                break;
            case 'hostEvent':
                hostEvent();
                break;
            case 'shareResource':
                shareResource();
                break;
            case 'askQuestion':
                askQuestion();
                break;
            case 'offerHelp':
                offerHelp();
                break;
            case 'requestFeedback':
                requestFeedback();
                break;
            default:
                console.log('Unknown action:', action);
        }
    }

    // Modal functions
    function openLoginModal() {
        const modal = document.getElementById('loginModal');
        if (modal) {
            modal.classList.add('show');
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            generateCaptcha();
        }
    }

    function closeLoginModal(event) {
        const modal = document.getElementById('loginModal');
        if (modal && (!event || event.target === modal || event.target.classList.contains('modal-close') || event.target.classList.contains('cancel-btn'))) {
            modal.classList.remove('show');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            resetLoginForm();
            pendingAction = null;
            pendingActionData = null;
        }
    }

    // Captcha system
    function generateCaptcha() {
        const num1 = Math.floor(Math.random() * 10) + 1;
        const num2 = Math.floor(Math.random() * 10) + 1;
        const operation = Math.random() > 0.5 ? '+' : '-';
        
        let question, answer;
        if (operation === '+') {
            question = `${num1} + ${num2}`;
            answer = num1 + num2;
        } else {
            // Ensure no negative results
            const larger = Math.max(num1, num2);
            const smaller = Math.min(num1, num2);
            question = `${larger} - ${smaller}`;
            answer = larger - smaller;
        }
        
        document.getElementById('captchaQuestion').textContent = question;
        document.getElementById('captchaChallenge').dataset.answer = answer;
    }

    // Show captcha when robot checkbox is clicked
    document.addEventListener('DOMContentLoaded', function() {
        const robotCheck = document.getElementById('robotCheck');
        if (robotCheck) {
            robotCheck.addEventListener('change', function() {
                const challenge = document.getElementById('captchaChallenge');
                if (this.checked) {
                    challenge.style.display = 'block';
                    generateCaptcha();
                } else {
                    challenge.style.display = 'none';
                }
            });
        }
    });

    // Community rules functions
    function showCommunityRules() {
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('communityRules').style.display = 'block';
    }

    function hideCommunityRules() {
        document.getElementById('communityRules').style.display = 'none';
        document.getElementById('loginForm').style.display = 'block';
    }

    // Handle login form submission
    function handleLogin(event) {
        event.preventDefault();
        
        const form = event.target;
        const email = form.email.value.trim();
        const name = form.name.value.trim();
        const robotCheck = document.getElementById('robotCheck').checked;
        const captchaAnswer = document.getElementById('captchaAnswer').value;
        const correctAnswer = document.getElementById('captchaChallenge').dataset.answer;
        const rulesAccepted = document.getElementById('communityRules').checked;
        
        // Validation
        if (!email || !name) {
            showNotification('Please fill in all required fields', 'error');
            return;
        }
        
        if (!robotCheck) {
            showNotification('Please verify you are not a robot', 'error');
            return;
        }
        
        if (captchaAnswer !== correctAnswer) {
            showNotification('Incorrect captcha answer. Please try again.', 'error');
            generateCaptcha();
            document.getElementById('captchaAnswer').value = '';
            return;
        }
        
        if (!rulesAccepted) {
            showNotification('Please accept the community guidelines', 'error');
            return;
        }
        
        // Content filtering
        if (containsInappropriateContent(name)) {
            showNotification('Display name contains inappropriate content', 'error');
            return;
        }
        
        // Save user data
        const userData = {
            email: email,
            name: name,
            joinDate: new Date().toISOString(),
            verified: true,
            warnings: 0
        };
        
        localStorage.setItem('communityUser', JSON.stringify(userData));
        
        // Close modal and execute pending action
        closeLoginModal();
        
        if (pendingAction) {
            executeAction(pendingAction, pendingActionData);
            pendingAction = null;
            pendingActionData = null;
        }
        
        showNotification(`üéâ Welcome to the community, ${name}!`, 'success');
    }

    // Reset login form
    function resetLoginForm() {
        const form = document.querySelector('.login-form');
        if (form) {
            form.reset();
            document.getElementById('captchaChallenge').style.display = 'none';
            document.getElementById('robotCheck').checked = false;
        }
    }

    // Content filtering system
    function containsInappropriateContent(text) {
        const inappropriateWords = [
            'spam', 'scam', 'hate', 'offensive', 'inappropriate',
            // Add more words as needed, but keep list reasonable
        ];
        
        const lowerText = text.toLowerCase();
        return inappropriateWords.some(word => lowerText.includes(word));
    }

    // Rate limiting system
    function checkRateLimit(action) {
        const user = getCurrentUser();
        if (!user) return false;
        
        const now = Date.now();
        const rateLimitKey = `rateLimit_${action}_${user.email}`;
        const lastAction = localStorage.getItem(rateLimitKey);
        
        if (lastAction && (now - parseInt(lastAction)) < 60000) { // 1 minute cooldown
            showNotification('‚è∞ Please wait before performing this action again', 'error');
            return false;
        }
        
        localStorage.setItem(rateLimitKey, now.toString());
        return true;
    }

    // Action implementations
    function applyToCollaboration(projectId) {
        if (!checkRateLimit('collaboration')) return;
        showNotification('üìù Collaboration application submitted! The project organizer will contact you via email.', 'success');
    }

    function joinArtTrade() {
        if (!checkRateLimit('artTrade')) return;
        showNotification('You\'ve joined the art trading circle! You\'ll receive pairing details via email.');
    }

    function submitToZine() {
        if (!checkRateLimit('zineSubmission')) return;
        showNotification('üìñ Zine submission form sent to your email! Check for submission guidelines.');
    }

    function postCollaboration() {
        if (!checkRateLimit('postCollab')) return;
        showNotification('Collaboration posting form sent to your email for review and approval.');
    }

    function rsvpToEvent(eventId) {
        if (!checkRateLimit('eventRSVP')) return;
        showNotification('üìÖ RSVP confirmed! Event details and updates will be sent to your email.');
    }

    function postEvent() {
        if (!checkRateLimit('postEvent')) return;
        showNotification('üìÖ Event submission form sent to your email for review and approval.');
    }

    function submitResource() {
        if (!checkRateLimit('submitResource')) return;
        showNotification('üìö Resource submission form sent to your email for review and approval.');
    }

    function findCollaborator() {
        showNotification('ü§ù Collaboration matching form sent to your email!');
    }

    function hostEvent() {
        showNotification('üìÖ Event hosting guide sent to your email!');
    }

    function shareResource() {
        showNotification('üìö Resource sharing form sent to your email!');
    }

    function askQuestion() {
        showNotification('‚ùì Question submission form sent to your email!');
    }

    function offerHelp() {
        showNotification('üôã‚Äç‚ôÄÔ∏è Help offering form sent to your email!');
    }

    function requestFeedback() {
        showNotification('üí¨ Feedback request form sent to your email!');
    }

    function trackResourceClick(resourceId) {
        // Track resource usage for analytics
        const clickData = {
            resource: resourceId,
            timestamp: new Date().toISOString(),
            user: getCurrentUser()?.email || 'anonymous'
        };
        
        // In a real implementation, this would send to analytics
        console.log('Resource clicked:', clickData);
    }
    
    // Create from prompt functionality
    function createFromPrompt() {
        // Get the current prompt text
        const promptText = document.getElementById('dailyPrompt').textContent;
        
        // Pre-fill the submission form with the prompt
        openSubmissionModal();
        
        // Add prompt reference to the description field
        setTimeout(() => {
            const descriptionField = document.getElementById('artworkDescription');
            if (descriptionField) {
                descriptionField.value = `Inspired by today's prompt: "${promptText.trim()}"\n\n`;
                descriptionField.focus();
                // Position cursor after the prompt reference
                descriptionField.setSelectionRange(descriptionField.value.length, descriptionField.value.length);
            }
        }, 100);
        
        showNotification('‚ú® Submission form opened with today\'s prompt! Add your artwork details.');
    }
    
    // Refresh prompt tags only
    function refreshPromptTags() {
        updatePromptTags();
        showNotification('üè∑Ô∏è Prompt tags have been refreshed!');
    }
    
    // Improved notification system to prevent overlapping
    let notificationQueue = [];
    let currentNotification = null;

    function showNotification(message, type = 'info') {
        // Add to queue if there's a current notification
        if (currentNotification) {
            notificationQueue.push({ message, type });
            return;
        }
        
        displayNotification(message, type);
    }

    function displayNotification(message, type) {
        // Remove any existing notifications first
        const existing = document.querySelector('.community-notification');
        if (existing) {
            existing.remove();
        }
        
        // Create notification element
        const notification = document.createElement('div');
        notification.className = 'community-notification';
        
        // Set styles based on type
        let backgroundColor, textColor;
        if (type === 'error') {
            backgroundColor = 'var(--color-secondary-accent)';
            textColor = 'var(--color-text)';
        } else if (type === 'success') {
            backgroundColor = 'var(--color-primary-accent)';
            textColor = 'var(--color-background)';
        } else {
            backgroundColor = 'var(--color-secondary-accent)';
            textColor = 'var(--color-primary-accent)';
        }
        
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${backgroundColor};
            color: ${textColor};
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
            z-index: 10000;
            font-family: var(--font-accent);
            font-size: 0.9rem;
            font-weight: 600;
            max-width: 300px;
            border: 1px solid rgba(248, 200, 208, 0.3);
            transform: translateX(100%);
            transition: transform 0.3s ease, opacity 0.3s ease;
            opacity: 0;
        `;
        notification.textContent = message;
        currentNotification = notification;
        
        // Add to page
        document.body.appendChild(notification);
        
        // Show notification with delay for smooth animation
        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
            notification.style.opacity = '1';
        }, 100);
        
        // Hide notification after 4 seconds
        setTimeout(() => {
            hideNotification(notification);
        }, 4000);
    }

    function hideNotification(notification) {
        if (notification && notification.parentNode) {
            notification.style.transform = 'translateX(100%)';
            notification.style.opacity = '0';
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
                
                // Clear current notification
                if (currentNotification === notification) {
                    currentNotification = null;
                }
                
                // Show next notification in queue
                if (notificationQueue.length > 0) {
                    const next = notificationQueue.shift();
                    setTimeout(() => displayNotification(next.message, next.type), 200);
                }
            }, 300);
        }
    }
    
    // Admin Functions for Manual Artwork Addition
    function addApprovedArtwork(artworkData) {
        const grid = document.querySelector('.showcase-grid');
        if (!grid) {
            console.error('Showcase grid not found');
            return false;
        }
        
        // Generate unique ID for approved artwork
        const artworkId = 'approved-' + Date.now();
        
        // Initialize like count
        if (typeof artworkLikeCounts !== 'undefined') {
            artworkLikeCounts[artworkId] = 0;
            localStorage.setItem('artworkLikeCounts', JSON.stringify(artworkLikeCounts));
        }
        
        // Create new artwork item
        const newItem = document.createElement('div');
        newItem.className = 'showcase-item';
        newItem.setAttribute('data-category', `${artworkData.category || 'other'} all recent`);
        newItem.setAttribute('data-medium', artworkData.medium || 'mixed-media');
        newItem.setAttribute('data-likes', '0');
        newItem.setAttribute('data-date', new Date().toISOString().split('T')[0]);
        
        // Set innerHTML with the artwork content
        newItem.innerHTML = `
            <img src="${artworkData.imageUrl}" alt="${artworkData.title}" style="width: 100%; height: 100%; object-fit: cover;">
            <div class="showcase-overlay">
                <h4>${artworkData.title}</h4>
                <p><a href="https://instagram.com/${(artworkData.artist_instagram || '@unknown').replace('@', '')}" target="_blank" rel="noopener noreferrer" class="instagram-link">${artworkData.artist_instagram || '@unknown'}</a></p>
                <span class="challenge-tag">${getCategoryDisplayName(artworkData.category)}</span>
                <div class="artwork-stats">
                    <button class="like-btn" onclick="toggleLike(this)" data-artwork-id="${artworkId}">
                        <span class="heart">‚ô°</span>
                        <span class="like-count">0</span>
                    </button>
                </div>
            </div>
        `;
        
        // Add to beginning of grid
        grid.insertBefore(newItem, grid.firstChild);
        
        console.log('Approved artwork added to showcase:', artworkData);
        return true;
    }
    
    function getCategoryDisplayName(category) {
        const categoryNames = {
            'daily-prompt': 'Daily Prompt',
            'personal': 'Personal Work',
            'commission': 'Commission',
            'study': 'Study',
            'collaboration': 'Collaboration',
            'other': 'Community Art'
        };
        return categoryNames[category] || 'Community Art';
    }
    
    // Admin console command for quick addition
    // Usage in browser console: quickAddArtwork({title: "Art Title", artist_instagram: "@artist", imageUrl: "data:image...", category: "personal"})
    function quickAddArtwork(data) {
        if (!data.title || !data.artist_instagram || !data.imageUrl) {
            console.error('Missing required fields: title, artist_instagram, imageUrl');
            return false;
        }
        
        const success = addApprovedArtwork(data);
        if (success) {
            showNotification(`‚úÖ Added "${data.title}" by ${data.artist_instagram} to showcase!`);
            // Switch to showcase tab to show the new artwork
            const showcaseTab = document.querySelector('[data-tab="showcase"]');
            if (showcaseTab) showcaseTab.click();
        }
        return success;
    }
    
    // Check for pending admin additions on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Load approved artworks from API
        loadApprovedArtworks();
        
        // Check if there's a pending artwork addition from admin panel
        const pendingArtwork = localStorage.getItem('pendingApprovalArtwork');
        if (pendingArtwork) {
            try {
                const artworkData = JSON.parse(pendingArtwork);
                if (addApprovedArtwork(artworkData)) {
                    showNotification(`‚úÖ Approved artwork "${artworkData.title}" has been added!`);
                    localStorage.removeItem('pendingApprovalArtwork');
                }
            } catch (e) {
                console.error('Error processing pending artwork:', e);
                localStorage.removeItem('pendingApprovalArtwork');
            }
        }
    });
    
    // Load approved artworks from API/data file
    async function loadApprovedArtworks() {
        try {
            const response = await fetch('../data/approved_artworks.json');
            if (response.ok) {
                const approvedArtworks = await response.json();
                displayApprovedArtworks(approvedArtworks);
            }
        } catch (error) {
            console.log('No approved artworks file found yet, or error loading:', error);
        }
    }
    
    // Display approved artworks in the showcase
    function displayApprovedArtworks(artworks) {
        const grid = document.querySelector('.showcase-grid');
        if (!grid || !Array.isArray(artworks)) return;
        
        artworks.forEach(artwork => {
            // Check if artwork already exists to avoid duplicates
            const existingArtwork = grid.querySelector(`[data-artwork-id="${artwork.id}"]`);
            if (existingArtwork) return;
            
            // Initialize like count if not present
            if (typeof artworkLikeCounts !== 'undefined') {
                artworkLikeCounts[artwork.id] = artwork.likes || 0;
                localStorage.setItem('artworkLikeCounts', JSON.stringify(artworkLikeCounts));
            }
            
            // Create new artwork item
            const newItem = document.createElement('div');
            newItem.className = 'showcase-item';
            newItem.setAttribute('data-category', `${artwork.category || 'other'} all recent`);
            newItem.setAttribute('data-medium', artwork.medium || 'mixed-media');
            newItem.setAttribute('data-likes', artwork.likes || '0');
            newItem.setAttribute('data-date', artwork.date_added);
            newItem.setAttribute('data-artwork-id', artwork.id);
            
            newItem.innerHTML = `
                <img src="${artwork.image_url}" alt="${artwork.artwork_title}" style="width: 100%; height: 100%; object-fit: cover;" loading="lazy">
                <div class="showcase-overlay">
                    <h4>${artwork.artwork_title}</h4>
                    <p><a href="https://instagram.com/${artwork.artist_instagram?.replace('@', '')}" target="_blank" rel="noopener noreferrer" class="instagram-link">${artwork.artist_instagram}</a></p>
                    <span class="challenge-tag">${getCategoryDisplayName(artwork.category)}</span>
                    <div class="artwork-stats">
                        <button class="like-btn" onclick="toggleLike(this)" data-artwork-id="${artwork.id}">
                            <span class="heart">‚ô°</span>
                            <span class="like-count">${artwork.likes || 0}</span>
                        </button>
                    </div>
                </div>
            `;
            
            // Add to showcase grid
            grid.appendChild(newItem);
        });
        
        console.log(`Loaded ${artworks.length} approved artworks`);
    }
    
    // Refresh approved artworks (useful for admin)
    function refreshApprovedArtworks() {
        // Clear existing API artworks
        const grid = document.querySelector('.showcase-grid');
        if (grid) {
            const apiArtworks = grid.querySelectorAll('[data-artwork-id^="api-"]');
            apiArtworks.forEach(item => item.remove());
        }
        
        // Reload from API
        loadApprovedArtworks();
        showNotification('üîÑ Refreshed approved artworks from email approvals!');
    }
    </script>

    <!-- Include main script for floating icons -->
    <script src="../scripts/main.js"></script>

    <!-- Simplified Community JavaScript -->
    <script>
        // Tab switching
        function switchToTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show the selected tab content
            const targetTab = document.getElementById(tabName);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            
            // Add active class to the clicked button
            const targetBtn = document.querySelector(`[data-tab="${tabName}"]`);
            if (targetBtn) {
                targetBtn.classList.add('active');
            }
        }

        // Quick Actions
        function quickMoodCheck() {
            const moods = ['üïäÔ∏è Lace - Delicate & intricate', 'üåπ Thorns - Bold & protective', '‚ú® Halo - Sacred & luminous'];
            const randomMood = moods[Math.floor(Math.random() * moods.length)];
            showNotification(`Today's mood: ${randomMood}`);
        }

        // Community Engagement
        function likePost(button) {
            const countSpan = button.querySelector('.count');
            const currentCount = parseInt(countSpan.textContent);
            countSpan.textContent = currentCount + 1;
            button.style.color = 'var(--color-primary-accent)';
            showNotification('‚ù§Ô∏è Post liked!');
        }

        function openArtworkModal(artworkId) {
            showNotification('Opening artwork details...');
            // In real implementation, this would open a modal with artwork details
        }

        function joinWeeklyChallenge() {
            showNotification('ÔøΩ Welcome to the Sacred Chaos challenge! Check your email for details.');
        }

        // Prompt Functions
        function savePromptForLater() {
            const promptText = document.getElementById('dailyPrompt').textContent;
            localStorage.setItem('savedPrompt_' + Date.now(), promptText);
            showNotification('üìå Prompt saved to your collection!');
        }

        function submitPromptResponse() {
            const responseInput = document.querySelector('.response-input-simple');
            if (responseInput && responseInput.value.trim()) {
                showNotification('üí≠ Your response has been shared with the community!');
                responseInput.value = '';
            } else {
                showNotification('‚ö†Ô∏è Please write a response before submitting.');
            }
        }

        // Challenge Functions
        function joinMainChallenge() {
            showNotification('üé® You\'ve joined the Sacred Chaos challenge! Details sent to your email.');
        }

        function startMiniChallenge(challengeType) {
            const challenges = {
                'blind-contour': 'Mini challenge started! Draw your hand without looking at the paper.',
                'three-color': 'üé® Mini challenge started! Create something using only 3 colors.',
                'word-art': 'üìù Mini challenge started! Turn the word "Harmony" into art.'
            };
            showNotification(challenges[challengeType] || '‚ú® Mini challenge started!');
        }

        // Resources Functions
        function downloadPack(packType) {
            const packs = {
                'wallpapers': 'üé® Sacred Chaos Wallpapers',
                'journal': 'ÔøΩ Weekly Prompt Journal',
                'stickers': '‚ú® Digital Sticker Pack'
            };
            showNotification(`üì¶ Downloading ${packs[packType] || 'resource pack'}...`);
            // In real implementation, this would trigger actual download
        }

        function requestResource(resourceType) {
            const resources = {
                'coloring': 'üé® More Coloring Pages',
                'templates': 'üìê Design Templates', 
                'tutorials': 'üìπ Video Tutorials',
                'other': 'üí° Custom Request'
            };
            showNotification(`üìù Request submitted for: ${resources[resourceType] || 'resource'}!`);
        }

        // Timer Functions for Mini Countdown
        function updateMiniTimer() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const diff = tomorrow - now;
            
            if (diff > 0) {
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                const hoursEl = document.getElementById('hours-mini');
                const minutesEl = document.getElementById('minutes-mini');
                const secondsEl = document.getElementById('seconds-mini');
                
                if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
                if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
                if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');
            }
        }

        // Initialize Enhanced Community Features
        document.addEventListener('DOMContentLoaded', function() {
            // Add click listeners for tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchToTab(tabName);
                });
            });
            
            // Initialize community features only once
            setTimeout(() => {
                if (typeof initializeShowcaseFilters === 'function') {
                    initializeShowcaseFilters();
                }
                if (typeof loadApprovedSubmissions === 'function') {
                    loadApprovedSubmissions();
                }
            }, 500);
            
            // Start mini timer
            updateMiniTimer();
            setInterval(updateMiniTimer, 1000);
            
            // Add some dynamic activity to make it feel alive
            setTimeout(() => {
                showNotification('Welcome to the Community Garden! Check out the artwork gallery and submit your own!');
            }, 2000);
        });
    </script>

    <!-- Simple Timer Script - No Dependencies -->
    <script>
        function simpleUpdateTimer() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const diff = tomorrow - now;
            
            if (diff > 0) {
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                const hoursEl = document.getElementById('hours');
                const minutesEl = document.getElementById('minutes');
                const secondsEl = document.getElementById('seconds');
                
                if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
                if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
                if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');
            }
        }
        
        // Start immediately
        setTimeout(() => {
            simpleUpdateTimer();
            setInterval(simpleUpdateTimer, 1000);
        }, 100);
    </script>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-content">
            <img src="../images/logo/logo4white.png" alt="Leah Cortez Logo" class="footer-logo" loading="lazy">
            <p class="copyright">Leah Cortez ¬© 2025</p>
        </div>
    </footer>
</body>
</html>
