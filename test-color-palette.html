<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Palette Maker Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
            margin: 20px;
            padding: 20px;
        }
        
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(126, 28, 46, 0.1);
            padding: 30px;
            border-radius: 10px;
            border: 2px solid rgba(248, 200, 208, 0.3);
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #f8c8d0;
            font-weight: bold;
        }
        
        input[type="color"] {
            width: 100px;
            height: 50px;
            border-radius: 8px;
            border: 2px solid #f8c8d0;
            cursor: pointer;
        }
        
        select {
            background: rgba(0,0,0,0.3);
            color: white;
            border: 2px solid #f8c8d0;
            padding: 10px;
            border-radius: 5px;
            font-size: 16px;
            width: 200px;
        }
        
        button {
            background: linear-gradient(135deg, #f8c8d0 0%, #7e1c2e 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(248, 200, 208, 0.3);
        }
        
        .palette-display {
            margin-top: 30px;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            min-height: 100px;
        }
        
        .accessibility-report {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            min-height: 50px;
        }
        
        .status {
            background: rgba(33, 150, 243, 0.2);
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="color: #f8c8d0; text-align: center; margin-bottom: 30px;">🎨 Color Palette Maker Test</h1>
        
        <div class="status" id="status">
            Initializing color palette maker...
        </div>
        
        <div class="control-group">
            <label for="baseColor">Base Color:</label>
            <input type="color" id="baseColor" value="#e74c3c">
        </div>
        
        <div class="control-group">
            <label for="colorScheme">Color Scheme:</label>
            <select id="colorScheme">
                <option value="monochromatic">Monochromatic</option>
                <option value="analogous">Analogous</option>
                <option value="complementary">Complementary</option>
                <option value="triadic">Triadic</option>
                <option value="split-complementary">Split Complementary</option>
            </select>
        </div>
        
        <button onclick="testGenerateColorPalette()">Generate Palette</button>
        
        <div class="palette-display" id="paletteDisplay">
            <h4>Generated Palette will appear here...</h4>
        </div>
        
        <div class="accessibility-report" id="accessibilityReport">
            <h4>Accessibility Report will appear here...</h4>
        </div>
    </div>

    <script>
        console.log('Test page loaded');
        
        // Test color conversion functions
        function hexToHsl(hex) {
            const r = parseInt(hex.slice(1, 3), 16) / 255;
            const g = parseInt(hex.slice(3, 5), 16) / 255;
            const b = parseInt(hex.slice(5, 7), 16) / 255;

            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            return { h: h * 360, s, l };
        }

        function hslToHex(h, s, l) {
            h /= 360;
            const a = s * Math.min(l, 1 - l);
            const f = n => {
                const k = (n + h * 12) % 12;
                const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
                return Math.round(255 * color).toString(16).padStart(2, '0');
            };
            return `#${f(0)}${f(8)}${f(4)}`;
        }
        
        function generateColorScheme(baseColor, schemeType) {
            console.log('Generating color scheme:', baseColor, schemeType);
            const hsl = hexToHsl(baseColor);
            console.log('HSL:', hsl);
            const colors = [baseColor];
            
            switch (schemeType) {
                case 'complementary':
                    colors.push(hslToHex((hsl.h + 180) % 360, hsl.s, hsl.l));
                    break;
                    
                case 'analogous':
                    colors.push(
                        hslToHex((hsl.h + 30) % 360, hsl.s, hsl.l),
                        hslToHex((hsl.h - 30 + 360) % 360, hsl.s, hsl.l)
                    );
                    break;
                    
                case 'triadic':
                    colors.push(
                        hslToHex((hsl.h + 120) % 360, hsl.s, hsl.l),
                        hslToHex((hsl.h + 240) % 360, hsl.s, hsl.l)
                    );
                    break;
                    
                case 'monochromatic':
                    colors.push(
                        hslToHex(hsl.h, hsl.s, Math.min(1, hsl.l + 0.2)),
                        hslToHex(hsl.h, hsl.s, Math.max(0, hsl.l - 0.2)),
                        hslToHex(hsl.h, Math.min(1, hsl.s + 0.15), hsl.l),
                        hslToHex(hsl.h, Math.max(0, hsl.s - 0.15), hsl.l)
                    );
                    break;
                    
                case 'split-complementary':
                    colors.push(
                        hslToHex((hsl.h + 150) % 360, hsl.s, hsl.l),
                        hslToHex((hsl.h + 210) % 360, hsl.s, hsl.l)
                    );
                    break;
            }
            
            console.log('Generated colors:', colors);
            return colors;
        }
        
        function testGenerateColorPalette() {
            const status = document.getElementById('status');
            status.innerHTML = '✅ Generating color palette...';
            status.style.borderLeftColor = '#4CAF50';
            status.style.backgroundColor = 'rgba(76, 175, 80, 0.2)';
            
            const baseColor = document.getElementById('baseColor').value;
            const schemeType = document.getElementById('colorScheme').value;
            const paletteDisplay = document.getElementById('paletteDisplay');
            const accessibilityReport = document.getElementById('accessibilityReport');
            
            console.log('Test generating palette with:', baseColor, schemeType);
            
            try {
                const colors = generateColorScheme(baseColor, schemeType);
                
                // Display palette
                paletteDisplay.innerHTML = '<h4 style="color: #f8c8d0; margin-bottom: 20px;">✨ Generated Palette:</h4>';
                
                const paletteContainer = document.createElement('div');
                paletteContainer.style.cssText = 'display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-bottom: 20px;';
                
                colors.forEach((color, index) => {
                    const swatchContainer = document.createElement('div');
                    swatchContainer.style.cssText = 'text-align: center; cursor: pointer; transition: transform 0.2s ease;';
                    swatchContainer.onmouseenter = () => swatchContainer.style.transform = 'scale(1.05)';
                    swatchContainer.onmouseleave = () => swatchContainer.style.transform = 'scale(1)';
                    
                    const swatch = document.createElement('div');
                    swatch.style.cssText = `
                        width: 60px; 
                        height: 60px; 
                        background: ${color}; 
                        border-radius: 8px; 
                        border: 3px solid rgba(248, 200, 208, 0.3);
                        margin-bottom: 8px;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    `;
                    
                    const label = document.createElement('div');
                    label.textContent = color;
                    label.style.cssText = 'font-size: 12px; color: white; font-family: monospace; font-weight: 500;';
                    
                    swatchContainer.appendChild(swatch);
                    swatchContainer.appendChild(label);
                    
                    swatchContainer.onclick = () => {
                        navigator.clipboard.writeText(color);
                        status.innerHTML = `📋 Copied ${color} to clipboard!`;
                        // Visual feedback
                        swatch.style.transform = 'scale(0.9)';
                        setTimeout(() => swatch.style.transform = 'scale(1)', 150);
                    };
                    
                    paletteContainer.appendChild(swatchContainer);
                });
                
                paletteDisplay.appendChild(paletteContainer);
                
                // Simple accessibility note
                accessibilityReport.innerHTML = `
                    <h4 style="color: #f8c8d0;">🔍 Test Results:</h4>
                    <p>✅ Color scheme: <strong>${schemeType}</strong></p>
                    <p>✅ Generated <strong>${colors.length}</strong> colors successfully</p>
                    <p>✅ All functions working properly</p>
                    <p style="margin-top: 15px; padding: 10px; background: rgba(76, 175, 80, 0.2); border-radius: 5px; border-left: 4px solid #4CAF50;">
                        <strong>Status:</strong> Color palette maker is working correctly! 
                        Click any color above to copy its hex code.
                    </p>
                `;
                
                status.innerHTML = '🎉 Color palette generated successfully!';
                
            } catch (error) {
                console.error('Error:', error);
                status.innerHTML = '❌ Error generating palette: ' + error.message;
                status.style.borderLeftColor = '#F44336';
                status.style.backgroundColor = 'rgba(244, 67, 54, 0.2)';
                
                paletteDisplay.innerHTML = '<h4>❌ Error generating palette</h4><p>' + error.message + '</p>';
            }
        }
        
        // Test on load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Test page ready');
            
            // Test the functions
            console.log('Testing color conversion...');
            const testHex = '#e74c3c';
            const testHsl = hexToHsl(testHex);
            const testHexBack = hslToHex(testHsl.h, testHsl.s, testHsl.l);
            console.log('Hex to HSL and back:', testHex, '->', testHsl, '->', testHexBack);
            
            const status = document.getElementById('status');
            status.innerHTML = '✅ Color palette maker ready! Choose colors and click Generate Palette.';
            status.style.borderLeftColor = '#4CAF50';
            status.style.backgroundColor = 'rgba(76, 175, 80, 0.2)';
        });
    </script>
</body>
</html>
